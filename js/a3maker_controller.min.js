A3Maker=A3Maker||{},$(function(){A3Maker.controller={selectTooButtonContainer:"",curZoom:100,canvasWidth:0,canvasHeight:0,scale:1,snapValue:1,$snap:"",rulerTopStartX:0,rulerLeftStartY:0,tool_buttons:[{sel:"#tool_image",type:"image",fn:this.clickSelect,evt:"click",key:["I",!0],childButtons:[]},{sel:"#tool_text",type:"text",fn:this.clickSelect,evt:"click",key:["T",!0],childButtons:[]},{sel:"#tool_link",type:"link",fn:this.clickSelect,evt:"click",key:["L",!0],childButtons:[]},{sel:"#tool_box",type:"box",fn:this.clickSelect,evt:"click",key:["O",!0],childButtons:[]},{sel:"#tool_hline",type:"hline",fn:this.clickSelect,evt:"click",key:["O",!0],childButtons:[]},{sel:"#tool_vline",type:"vline",fn:this.clickSelect,evt:"click",key:["O",!0],childButtons:[]},{sel:"#tool_table",type:"table",fn:this.clickSelect,evt:"click",key:["O",!0],childButtons:[]},{sel:"#tool_html",type:"html",fn:this.clickSelect,evt:"click",key:["O",!0],childButtons:[]},{sel:"#tool_order",type:"order",fn:this.clickSelect,evt:"click",key:["O",!0],childButtons:[]},{sel:"#tool_panseo",type:"panseo",fn:this.clickSelect,evt:"click",key:["O",!0],childButtons:[]},{sel:"#tool_camera",type:"camera",fn:this.clickSelect,evt:"click",key:["O",!0],childButtons:[]},{sel:"#tool_script",type:"script",fn:this.clickSelect,evt:"click",key:["O",!0],childButtons:[]},{sel:"#tool_iframe",type:"iframe",fn:this.clickSelect,evt:"click",key:["O",!0],childButtons:[]},{sel:"#tool_list",type:"list",fn:this.clickSelect,evt:"click",key:["O",!0],childButtons:["listrow"]},{sel:"#tool_ads",type:"ads",fn:this.clickSelect,evt:"click",key:["O",!0],childButtons:[]},{sel:"#tool_analytics",type:"analytics",fn:this.clickSelect,evt:"click",key:["O",!0],childButtons:[]},{sel:"#tool_popup",type:"popup",fn:this.clickSelect,evt:"click",key:["N",!0],childButtons:["box","table","image","text","link","order","list","camera"]},{sel:"#tool_listrow",type:"listrow",fn:this.clickSelect,evt:"click",key:["R",!0],childButtons:["image","text","link","hline","vline","box","order","camera"]}],getMenuSet:function(e){var t=this.findChildButtons(e);return t.length<1?(t=this.findChildButtons(e.parent),t):t},findChildButtons:function(e){var t="";return e&&"page"!=e.data.type?($.each(this.tool_buttons,function(a,n){n.type!=e.data.type||(t=n.childButtons)}),t):["box","image","text","link","order","popup","list","table","html","hline","vline","script","panseo","camera","ifrme","ads","analytics"]},applyToolButtonChange:function(e){var t="";t=e&&"page"!=e.data.type?this.getMenuSet(e):["box","image","text","link","order","popup","list","table","html","hline","vline","script","panseo","camera","ifrme","ads","analytics"],$.each(this.tool_buttons,function(e,t){$(t.sel).hide()}),$.each(t,function(e,t){$("#tool_"+t).show()})},get:function(e){return this[e]},set:function(e,t){this[e]=t},setComCount:function(e,t){$(e+" .com_count").html("&nbsp;("+t+")")},init:function(){this.initializeContextMenuEventHandler(),this.initializePreviewEventHandler(),this.initializeDocumentClickHandler(),this.setProjectInfo(),this.initTree(),this.initializeAlignBtnEventHandler(),this.initializeSubMenuBlock(),this.initializeToolButtonEvent(),$("#logo_btn").click(function(){$(A3Maker.holder).width(800)}),this.initailizeAddPageEventHandler(),this.initailizecreateProejctEventHandler(),this.initailizeSaveProejctEventHandler(),this.initailizeSnapEventHandler(),this.initailizeKeyEventHandler(),this.initailizeFullScreenEventHandler(),$("#element_config").draggable({containment:"document"}),$("#tabs").tabs(),$("#shape_insert_layer").tooltip({position:{my:"center bottom-8",at:"center top",using:function(e,t){$(this).css(e),$("<div>").addClass("arrow").addClass(t.vertical).addClass(t.horizontal).appendTo(this)}}})},initializeSubMenuBlock:function(){var e=this;$("#table_insert_layer > #table_insert_layer_outer > #table_insert_layer_inner .table_cell").click(function(t){var a=parseInt($(this).attr("row")),n=parseInt($(this).attr("col"));e.createComponent("table",{rowCnt:a,colCnt:n}),e.closeInsertTableLayer()}),$("#table_insert_layer > #table_insert_layer_outer > #table_insert_layer_inner .table_cell").hover(function(){var e=parseInt($(this).attr("row")),t=parseInt($(this).attr("col"));$("#table_insert_msg").text(e+" x "+t);var a=$("#table_insert_layer > #table_insert_layer_outer > #table_insert_layer_inner .table_cell");a.removeClass("select"),a.each(function(a){var n=parseInt($(this).attr("row")),o=parseInt($(this).attr("col"));o<=t&&n<=e&&$(this).addClass("select")})},function(){})},initailizeKeyEventHandler:function(){var e=this;$(document).bind("keydown",function(t){27!=t.keyCode||e.resetEditor()})},initailizeFullScreenEventHandler:function(){var e=this;$(".btn_full_screen").click(function(){var e=$("#zoom-container")[0];screenfull.enabled&&screenfull.request(e)}),$(document).bind("fullscreenchange",function(){if($(document).fullScreen()){e.propertyWindowCss={left:A3Maker.propertyWindow.positionX,top:A3Maker.propertyWindow.positionY},e.contentContainerCss={left:$(".content_container").css("left"),top:$(".content_container").css("top"),"background-color":$(".content_container").css("background-color"),width:$(".content_container").css("width"),height:$(".content_container").css("height")},e.verticalTableCss={"background-color":$(".vertical_table").css("background-color")},$(".content_container").css({left:"0px",top:"0px","background-color":"#000",width:screen.width+"px",height:screen.height+"px"}),$(".vertical_table").css({"background-color":"#000"}),A3Maker.propertyWindow.setPropertyWindowPos(25,25);var t=10,a=10;$.each(A3Maker.project.pages,function(e,n){n.$pageHolderSelector.css({position:"absolute",display:"block",left:t+"px",top:a+"px"}),t+=40})}else $(".content_container").css(e.contentContainerCss),$(".vertical_table").css(e.verticalTableCss),$.each(A3Maker.project.pages,function(e,t){t.$pageHolderSelector.css({position:"relative",display:"none",left:"0px",top:"0px"})}),A3Maker.showPage(A3Maker.getSelectedPage()),A3Maker.propertyWindow.setPropertyWindowPos(e.propertyWindowCss.left,e.propertyWindowCss.top)}),$(document).bind("fullscreenerror",function(){alert("Browser rejected fullscreen change")})},intializeTransferToImgEventHandler:function(){$(".btn_html2canvas").click(function(e){html2canvas($(".page"),{allowTaint:!0,logging:!0,background:"#FF0000",timeout:0,proxy:"html2canvasproxy.ashx",onrendered:function(e){var t=e.toDataURL("image/png");console.log(t),console.log(e.width+" : "+e.height);var a=window.open("","imageWin","width=1000,height="+e.height);a.document.write("<html><body style='margin:0'>"),a.document.write("</body><html>"),a.document.title="html2Canvas",a.document.body.appendChild(e)}})})},initailizeSaveProejctEventHandler:function(){$("div.btn_save").click(function(e){A3Maker.saveProject()}),$(".element_config .el_title .text .btn_close").click(function(){A3Maker.settings.close()}),$("div.btn_config").click(function(e){A3Maker.settings.open()}),$("#exportProject").click(function(e){var t=A3Maker.createJsonFromProject(),a=JSON.stringify(t),n="data:application/json;charset=utf-8,"+encodeURIComponent(a);this.href=n,this.target="_blank";var o=A3Maker.project.projectName.replace(/ /g,"_")+"_"+$.datepicker.formatDate("yymmdd",new Date)+".txt";this.download=o}),$("#importProject").click(function(e){var t='<input type="file" id="inputFile" style ="display:none">';$("body").append(t),$("#inputFile").trigger("click"),$("#inputFile").change(function(e){var t=document.getElementById("inputFile").files,a=t[0],n=new FileReader;n.onloadend=function(e){if(e.target.readyState==FileReader.DONE){var t=JSON.parse(e.target.result),a={data:JSON.stringify(t)};try{A3Maker.createProjectFromJson(a),A3Maker.controller.init(),A3Maker.canvas.init(),A3Maker.multiSelectionRect.init(),A3Maker.validation.init(),A3Maker.scrollBarWidth=A3Maker.util.getScrollbarWidth(),A3Maker.sidebar.init(),A3Maker.statusBar.init(),A3Maker.projectSetting.close()}catch(e){console.error("import file error",e)}}},n.readAsText(a,"utf-8")})}),$("div.btn_fullscreen").click(function(e){}),$("div.btn_config").click(function(e){})},initailizecreateProejctEventHandler:function(){$(".btn_create_project").click(function(e){A3Maker.projectWindow.show()})},initializeEscEventHandler:function(){var e=this;event.stopPropagtion(),event.preventDefault(),$(document).keydown(function(t){27==t.keyCode&&e.resetEditor()})},initializeDocumentClickHandler:function(){var e=this;$(A3Maker.holder).bind("mousedown",function(t){t.ctrlKey||(e.resetEditor(),A3Maker.getSelectedPage()&&A3Maker.showPage(A3Maker.getSelectedPage()))})},initializeAlignBtnEventHandler:function(){$(".aligntoolbar .align").click(function(e){A3Maker.multiSelectionRect.handleAlignAction(this)})},resetEditor:function(){var e=A3Maker.getSelectedPage();if(e){A3Maker.changeAllComponentSelectStatus(e,!1);var t=A3Maker.controller.$tree.tree("getNodeById",e.data.UUID);A3Maker.controller.$tree.tree("selectNode",t),A3Maker.controller.applyToolButtonChange(e),A3Maker.setSelectedComponent(null)}A3Maker.contextMenu.close(),A3Maker.statusBar.alignLineShow||A3Maker.draw.clear(),this.enableBeforeGrayPanel(!1,null),this.closeInsertTableLayer(),this.closeInsertShapeLayer(),A3Maker.propertyWindow.closePropertyWindow(),A3Maker.multiSelectionRect.resetSelection(),A3Maker.codeWindow.close(),A3Maker.project.isComponentAction=!1},initializeContextMenuEventHandler:function(){$(A3Maker.holder).bind("contextmenu",function(e){e.preventDefault(),e.stopPropagation(),e.ctrlKey?A3Maker.contextMenu.close():A3Maker.contextMenu.show(A3Maker.contextMenu.requestActionEnums.COMPONENT,e.pageX,e.pageY)})},initializePreviewEventHandler:function(){$(".btn_preview").click(function(e){e.preventDefault(),A3Maker.changeAllComponentSelectStatus(A3Maker.getSelectedPage(),!1),A3Maker.multiSelectionRect.resetSelection(),A3Maker.preview.startPreview()})},initializeContextMenuEventHandler2:function(){$(A3Maker.editorPane).bind("mosedown",function(e){e.ctrl||3==e.which&&(e.stopPropagation(),e.preventDefault(),A3Maker.contextMenu.close())})},initializeWindowSizeChangeEventHandler:function(){$(window).resize(function(e){A3Maker.canvas.findZooomOnWindowSize(),A3Maker.canvas.initCanvas(),A3Maker.canvas.adjustCanvas(),A3Maker.canvas.adjustRuler()})},initTree:function(){var e=this,t=[{label:`PROJECT : ${A3Maker.project.projectName}`,id:A3Maker.project.projectName,type:"root",data:{fullName:"proejct",name:"proejct"}}];this.$tree=$("#page_sidebar");this.$tree.tree({onCreateLi:function(e,t){if("root"!=e.type){var a=["alert",e.data.data.UUID].join("_");t.find(".jqtree-title").after($('<span class = "fa fa-question-circle-o" style ="margin-left : 40px;color:#FF0000;margin-left : 5px" id ="'+a+'"></span>').hide());var n="";switch(e.data.data.type){case"image":n="fa-file-image-o";break;case"box":n="fa-square-o";break;case"text":n="fa-font";break;case"order":n="fa-shopping-cart";break;case"link":n="fa-link";break;case"list":case"listrow":n="fa-list-alt";break;case"popup":n="fa-clipboard";break;case"page":n="fa-file-text";break;case"script":n="fa-code";break;case"table":n="fa-table";break;case"panseo":n="fa-ils";break;case"camera":n="fa fa-video-camera";break;case"hline":case"hline":n=""}t.find(".jqtree-title").before($("<span></span>").addClass("fa").addClass(n)).css("margin-left","10px"),"page"==e.data.type?(t.find("."+n).parent().addClass("component_page"),t.find("."+n).prev().length>0?t.find("."+n).parent().css("padding-left",5*e.getLevel()+5+"px"):t.find("."+n).parent().css("padding-left",5*e.getLevel()+18+"px")):t.find("."+n).prev().length>0?t.find("."+n).parent().css("padding-left",5*e.getLevel()+20+"px"):t.find("."+n).parent().css("padding-left",5*e.getLevel()+34+"px")}},dragAndDrop:!0,autoOpen:!1,keyboardSupport:!1,data:t});this.$tree.bind("tree.click",function(t){A3Maker.contextMenu.close();var a=t.node,n=t.node.data,o=n.id,r=n.type,i=n.name;if(e.$tree.tree("isNodeSelected",a)){A3Maker.contextMenu.close();var l=$(a.element).offset().left,s=$(a.element).offset().top,c=$('<div class ="updateTextDiv" style ="position:absolute"></div>'),d=$(a.element).width(),p=$(a.element).height();e.IsNodeOpen(a.id)&&(p/=a.children.length+1);var u=$("<input></input>").attr({type:"text",name:"updateText",id:"updateText",value:a.name}).addClass("updateText").css({border:"1px 1 #DDDDDD",width:d,height:p}).appendTo(c);return c.appendTo("body"),c.css({left:l,top:s}),u.bind("keydown",function(t){if(13==t.which){if(0==$(this).val().length||""==$(this).val())return alert("이름은 공백이 될 수 없습니다"),u.val(i),void $(this).focus();var n=null;if("page"!=r){var o=[];A3Maker.findParentsRecursive(o,a.data),n=e.$tree.tree("getNodeById",o[0].UUID)}if(a.name!=$(this).val()){var l=e.isResiteredNodeIdOrName(n,r,$(this).val());if(l)return alert("already name or id"),u.val(i),void $(this).focus()}a.data.data.name=$(this).val(),u.unbind("keydown"),c.remove(),e.$tree.tree("updateNode",a,$(this).val()),e.$tree.tree("selectNode",a),A3Maker.propertyWindow.setData("name",$(this).val())}}).bind("focusout",function(t){if(0==$(this).val().length||""==$(this).val())return alert("이름은 공백이 될 수 없습니다"),u.val(i),void $(this).focus();var n=null;if("page"!=r){var o=[];A3Maker.findParentsRecursive(o,a.data),n=e.$tree.tree("getNodeById",o[0].UUID)}if(a.name!=$(this).val()){var l=e.isResiteredNodeIdOrName(n,r,$(this).val());if(l)return alert("already name or id"),u.val(i),void $(this).focus()}a.data.data.name=$(this).val(),e.$tree.tree("updateNode",a,$(this).val()),u.unbind("focusout"),c.remove(),A3Maker.propertyWindow.setData("name",$(this).val())}),void u.focus()}if($(".updateText").trigger("blur"),t.node.type&&"root"==t.node.type)t.preventDefault();else{if(A3Maker.sidebar.sidebarType=A3Maker.sidebar.sidebarTypeEnums.LIST_VIEW,e.enableBeforeGrayPanel(!1),A3Maker.changeAllComponentSelectStatus(A3Maker.getSelectedPage(),!1),e.resetEditor(),"page"==n.data.type)e.selectTreeNode(o),e.selectPage(n,!0);else{var f=[];A3Maker.findParentsRecursive(f,n),e.selectPage(f[0],!1),n.setSelectStatus(!0),setTimeout(function(){e.selectTreeNode(f[0].data.UUID),n.setSelectStatus(!0)},5)}A3Maker.controller.applyToolButtonChange(n)}}),this.$tree.bind("tree.move",function(t){e.handleTreeMoveEvent(t)}),this.$tree.bind("tree.contextmenu",function(t){var a=e.$tree.tree("getNodeById",t.node.data.UUID);e.$tree.tree("selectNode",a);var n=t.node.data.type;if("page"==n)A3Maker.setSelectedPage(t.node.data),A3Maker.setSelectedComponent(null);else{var o=[];A3Maker.findParentsRecursive(o,t.node.data),console.log(o),A3Maker.setSelectedPage(o[0]),setTimeout(function(){A3Maker.setSelectedComponent(t.node.data)},10)}A3Maker.contextMenu.show("page"==t.node.data.type?A3Maker.contextMenu.requestActionEnums.PAGE:A3Maker.contextMenu.requestActionEnums.COMPONENT,t.click_event.pageX,t.click_event.pageY)}),$(".btn-tree-expand").click(function(t){if($(this).hasClass("expand")){$(this).removeClass("expand"),$(this).addClass("collapse"),$(".fa-sort-desc").show(),$(".fa-sort-asc").hide();for(var a=e.$tree.tree("getTree"),n=0;n<a.children.length;n++){var o=a.children[n];e.$tree.tree("openNode",o)}}else{$(this).removeClass("collapse"),$(this).addClass("expand"),$(".fa-sort-desc").hide(),$(".fa-sort-asc").show();for(a=e.$tree.tree("getTree"),n=0;n<a.children.length;n++){o=a.children[n];e.$tree.tree("closeNode",o)}}}),$(document).on("mouseover","ul.jqtree-tree .component_page",function(e){$(this).parent().css({"background-color":"#F0F4F7","font-weight":"160"})}),$(document).on("mouseout","ul.jqtree-tree .component_page",function(e){$(this).parent().css({"background-color":"#ffffff"})})},isResiteredNodeIdOrName:function(e,t,a){var n=!1,o=e||this.$tree.tree("getTree");return o.iterate(function(e){return e.type!=t||(e.name==a||e.fullName==a?(n=!0,!1):void 0)}),n},initailizeSnapEventHandler:function(){var e=this;this.$snap=$("#snap_select"),this.$snap.val(this.snapValue),this.$snap.change(function(t){e.snapValue=parseInt($(this).val())})},canDroppable:function(e,t){for(var a=A3Maker.componentType[e].permittableChildComps,n=!1,o=0;o<a.length;o++)if(a[o]==t){n=!0;break}return n},canMovable:function(e,t){return!0},handleTreeMoveEvent:function(e){e.preventDefault();var t=e.move_info.moved_node,a=e.move_info.target_node,n=(t.data,a.data,e.move_info.position);switch(n){case"inside":if("root"==a.type&&"page"==t.type)return console.log("1"),void this.moveComponentAfter(e,a,t);if(this.IsNodeOpen(a.id))return this.moveComponentAfter(e,a,t),void console.log("2");if(!this.canDroppable(a.type,t.type))return;this.moveComponentInside(e,a,t),console.log("3");break;case"after":if(!this.canMovable(a,t))return;this.moveComponentAfter(e,a,t),console.log("4");break;case"before":if("root"==a.type)return}},isNodeSelected:function(e){var t=!1,a=this.$tree.tree("getState");return $.each(a.selected_node,function(a,n){e==n&&(t=!0)}),t},IsNodeOpen:function(e){var t=!1,a=this.$tree.tree("getState");return $.each(a.open_nodes,function(a,n){e==n&&(t=!0)}),t},moveComponentInside:function(e,t,a){e.move_info.do_move();var n=A3Maker.cloneComponent(t.data,a.data,!0,!0);n.setSelectStatus(!0),n.selectStatus=!0,A3Maker.showPageFromChild(n),A3Maker.setSelectedComponent(n),a.data.parent.removeComponent(a.data)},moveComponentAfter:function(e,t,a){if("page"==a.type){if("root"==t.type){e.move_info.do_move(),this.$tree.tree("selectNode",a);var n="";return A3Maker.project.pages.splice(0,0,a.data),$(n.pageHolderSelectorStr).before($(a.data.pageHolderSelectorStr)),void A3Maker.showPage(a.data)}if("page"==t.type){e.move_info.do_move(),this.$tree.tree("selectNode",a);var o=-1;return $.each(A3Maker.project.pages,function(e,a){a.UUID==t.data.UUID&&(o=e)}),-1!=o&&A3Maker.project.pages.splice(o,0,a.data),$(t.data.pageHolderSelectorStr).after($(a.data.pageHolderSelectorStr)),void A3Maker.showPage(a.data)}}if("page"!=a.type){if("listrow"==a.type&&"list"!=t.type&&"listrow"!=t.type)return;if("root"==t.type)return;if("page"==t.type&&!this.IsNodeOpen(t.id))return;var r=t.data,i=a.data;"page"==r.type||"list"==r.type||"popup"==r.type||"listrow"==r.type?(r=t.children[0].data,$(r.externalWrapperQueryStr).before($(i.externalWrapperQueryStr))):$(r.externalWrapperQueryStr).after($(i.externalWrapperQueryStr)),e.move_info.do_move(),A3Maker.showPageFromChild(r)}},enableBeforeGrayPanel:function(e,t){if(e){var a=$(A3Maker.grayPanelstr).css("background-color","#000000").css("opacity",.3);$(t.externalWrapperQueryStr).before(a)}else $(".gray_panel").remove()},treeContextmenuClicked:function(e){var t=e.node;t.data.name,t.data.id},setProjectInfo:function(){var e=A3Maker.project.projectName+"  ("+A3Maker.project.width+" X "+A3Maker.project.height+")";$("#project_name").html(e)},initializeToolButtonEvent:function(){var e=this;$.each(e.tool_buttons,function(t,a){var n;if(a.sel){if(n=$(a.sel),0==n.length)return;a.evt&&n[a.evt](e.toolButtonEventClosure())}})},initailizeAddPageEventHandler:function(){$(".btn_addpage").click(function(e){e.preventDefault(),A3Maker.newPageWindow.show()})},genPageTreeJsonData:function(e){return{label:e.pageName,id:e.pageName}},openInsertTableLayer:function(e){$(".table_cell").removeClass("select"),$("#table_insert_msg").text(""),$("#table_insert_msg").text("0 x 0");var t=$(e).offset().top,a=$(e).offset().left;$("#table_insert_layer").css({position:"absolute",top:t+3+"px",left:a+65+"px"}).show()},closeInsertTableLayer:function(){$("#table_insert_msg").text(""),$(".table_cell").removeClass("select"),$("#table_insert_layer").hide()},openInsertShapeLayer:function(e){$("#shape_insert_layer").hide();var t=$(e).offset().top,a=$(e).offset().left;$("#shape_insert_layer").css({position:"absolute",top:t+3+"px",left:a+65+"px"}).show()},closeInsertShapeLayer:function(){$("#shape_insert_layer").hide()},toolButtonEventClosure:function(){var e=this;return function(t){var a=A3Maker.getSelectedPage();if(a){var n=$(t.target).data("comp");console.log("선택한 컴포넌트 : "+n),"analytics"!=n&&"ads"!=n&&"iframe"!=n&&n&&("box"!=n?"table"!=n?e.createComponent(n,!0,!0,{}):e.openInsertTableLayer(this):e.openInsertShapeLayer(this))}else alert("선택하신 페이지가 없습니다. 페이지를 먼저 선택해주세요")}},createComponent:function(e,t){var a,n,o=this,r=A3Maker.getSelectedPage(),i=A3Maker.getSelectedComponent(),l="";if(r){if("script"==e&&(l=r.createComponent(e,!0,!0,t),l.attach(),l.setSelectStatus(!0),n=l),i){var s=i.isContainer();s.isContainer?(a=i,l=a.createComponent(e,!0,!0,t),l.attach(),l.setSelectStatus(!0),n=l):(l=r.createComponent(e,!0,!0,t),l.attach(),l.setSelectStatus(!0),n=l)}else l=r.createComponent(e,!0,!0,t),l.attach(),l.setSelectStatus(!0),n=l;o.applyToolButtonChange(n),event.stopPropagation(),o.closeInsertTableLayer(),o.closeInsertShapeLayer()}else alert("선택한 페이지가 없습니다. 페이지를 선택하시거나 페이지를 새로 생성하세요")},selectTreeNode:function(e){var t=this.$tree.tree("getNodeById",e);this.$tree.tree("selectNode",t)},getPageIndex:function(e){for(var t=0,a=0;a<A3Maker.project.pages.length;a++)if(e.data.UUID===A3Maker.project.pages[a].data.UUID){t=a;break}return t},selectPage:function(e,t,a){A3Maker.contextMenu.close(),A3Maker.showPage(e),A3Maker.controller.applyToolButtonChange(e),A3Maker.changeAllComponentSelectStatus(e,!1),A3Maker.statusBar.setPageNumberText(this.getPageIndex(e)+1,A3Maker.project.pages.length,e.data.name),void 0!==A3Maker.sidebar.sidebarType&&A3Maker.sidebar.sidebarType||(A3Maker.sidebar.sidebarType=A3Maker.sidebar.sidebarTypeEnums.LIST_VEIW),A3Maker.sidebar.sidebarType==A3Maker.sidebar.sidebarTypeEnums.LIST_VEIW?t||this.selectTreeNode(e.data.UUID):A3Maker.sidebar.sidebarType==A3Maker.sidebar.sidebarTypeEnums.THUMBNAIL_VIEW&&($(".clone_thumb_container").removeClass("sidebar2_thumb_select"),$(".cloneWapper").removeClass("clone_thumb_select"),$("#page_"+e.data.UUID).addClass("sidebar2_thumb_select"),$("#page_"+e.data.UUID+" .cloneWapper").addClass("clone_thumb_select"));for(var n=0,o=0;o<A3Maker.project.pages.length;o++)if(e.data.UUID===A3Maker.project.pages[o].data.UUID){n=o;break}A3Maker.statusBar.setPageSlider({value:n+1})},getToolButtonContainer:function(){return selectedComponent=A3Maker.getSelectedComponent(),selectedComponent&&selectedComponent?"list"==selectedComponent.parent.type||"listrow"==selectedComponent.parent.type||"popup"==selectedComponent.parent.type?selectedComponent.parent.type:selectedComponent.data.type:"page"},toolButtonClick:function(e,t){return!0}}});