A3Maker=A3Maker||{},$(function(){A3Maker.sidebar={sidebarTypeEnums:{LIST_VEIW:"LIST_VEIW",THUMBNAIL_VIEW:"THUMBNAIL_VIEW"},init:function(){this.sidebarType=A3Maker.sidebar.sidebarTypeEnums.LIST_VIEW,this.initSidebarScoll(),this.initializeAddPageEventHandler(),this.initializeSidebarOpenHideEventHandler(),this.initializeSearchEventHandler(),this.initializeListViewEventHandler(),this.initializeThumbNailViewEventHandler(),$("#thumbnailMenu .listview").trigger("click")},initSidebarScoll:function(){$(".tree-menus").mCustomScrollbar({theme:"minimal"})},selectBar:function(e){var i;switch(e){case A3Maker.sidebar.sidebarTypeEnums.LIST_VEIW:i="#thumbnailMenu .listview";case A3Maker.sidebar.sidebarTypeEnums.THUMBNAIL_VIEW:i="#thumbnailMenu .thumbnail_view"}$(i).trigger("click")},updateSideThumbnailView:function(e){if(A3Maker.sidebar.sidebarType===A3Maker.sidebar.sidebarTypeEnums.THUMBNAIL_VIEW){var i=$("#page_sidebar_2");if(!e){i.empty();for(var t=this.cloneThumbnailAllPage(!0),a=0;a<t.length;a++)i.append(t[a])}}},initializeCustomScrollbarHandler:function(){$(".tree-menus").mCustomScrollbar({theme:"minimal"})},initializeAddPageEventHandler:function(){$("#addpage").click(function(e){e.preventDefault(),A3Maker.newPageWindow.show()})},initializeSearchEventHandler:function(){$("#searchBtn").click(function(e){$("#search_container").show(),$("#search_filter").focus()}),$("#search_close").click(function(e){$("#search_container").hide()})},initializeSidebarOpenHideEventHandler:function(){var e=$("#side_act"),i=e.find("#side_meneu_state"),t=$(".content_container");t.css("left");e.click(function(a){e.toggleClass("side_menu_open"),e.hasClass("side_menu_open")?(t.stop(!0).animate({left:"283px"},70),i.text("CLOSE")):(t.stop(!0).animate({left:"0px"},70),i.text("OPEN"))}),e.trigger("click")},initializeListViewEventHandler:function(){var e=this;$("#thumbnailMenu .listview").click(function(i){i.preventDefault(),e.sidebarType=A3Maker.sidebar.sidebarTypeEnums.LIST_VIEW,$("#thumbnailMenu .thumbnail_view").removeClass("thumbnail_view_active"),$(this).addClass("listview_active"),$("#page_sidebar_2").hide(),$("#page_sidebar").show()})},cloneThumbnailPage:function(){},cloneThumbnailAllPage:function(e,i,t){var a=[],n=A3Maker.project.data.width>=150?150:A3Maker.project.data.width,r=A3Maker.project.data.height*n/A3Maker.project.data.width;i=n,t=r;return $(".editor-page").each(function(n){var r=$("<div class ='clone_thumb_container' >").height(t).css({padding:"10px"}).css({"padding-left":"25px"}).attr("id","page_"+$(this).attr("id"));if(e){var s=$("<div>").css({width:"5%",height:"100%",float:"left","font-weight":"bold","font-color":"#666666","font-size":"9pt"});s.html(n+1),r.append(s)}var c=$("<div class ='cloneWapper side_clone_page_thumbnail'>");c.css("border","1px solid #bbb"),c.css("position","relative"),c.css("display","block"),c.css("float","left"),c.css("width",i),c.css("height",t),c.css("background-color","#fff"),c.css("margin-bottom","10px"),c.addClass("thumb_page_"+(n+1)),c.data("thumb_page",n+1);var o=$(this).clone();o.removeClass(),o.find(".eggbon_com").each(function(e){$(this).attr("id");$(this).attr("id","thumb_"+$(this).attr("id"))}),o.find(".moveActionTrigger").removeClass(),o.find(".internalWrapper").removeClass(),o.find(".component").removeClass(),o.find(".grip").remove(),o.find(".component_border").remove(),o.width(A3Maker.project.width).height(A3Maker.project.height),o.css("display","block"),o.find("div.cross_grid_line").remove(),o.find("*").css("cursor","default"),o.css("cursor","pointer"),c.append(o);var l="0% 0%",d=i/A3Maker.project.width,h=t/A3Maker.project.height;o.css({"-moz-transform-origin":l,"transform-origin":l,"-ms-transform-origin":l,"-webkit-transform-origin":l}),o.css({transform:"scale("+d+","+h+" )"}),r.append(c),r.find(".align_component_line").remove(),r.hover(function(e){},function(e){}),e&&(r.contextmenu(function(e){event.preventDefault(),$(this).trigger("click"),A3Maker.setSelectedComponent(null),A3Maker.contextMenu.close(),A3Maker.contextMenu.show(A3Maker.contextMenu.requestActionEnums.PAGE,e.pageX,e.pageY)}),r.click(function(e){var i=A3Maker.project.componentMap[$(this).attr("id").split("_")[1]];A3Maker.controller.selectPage(i)})),a.push(r)}),a},initializeThumbNailViewEventHandler:function(){var e=this;$("#thumbnail_view").click(function(i){e.sidebarType=A3Maker.sidebar.sidebarTypeEnums.THUMBNAIL_VIEW,i.preventDefault(),$("#thumbnailMenu .listview").removeClass("listview_active"),$(this).addClass("thumbnail_view_active"),$("#page_sidebar").hide();$(".editor-page").clone();var t=$("#page_sidebar_2");t.empty();for(var a=A3Maker.project.data.width>=140?140:A3Maker.project.data.width,n=A3Maker.project.data.width*a/A3Maker.project.data.height,r=e.cloneThumbnailAllPage(!0,a,n),s=0;s<r.length;s++)t.append(r[s]);t.show();var c=A3Maker.getSelectedPage();c||(c=A3Maker.project.pages[0]),$("#page_"+c.data.UUID).click()})}}});