A3Maker=A3Maker||{},$(function(){A3Maker.clipArt={init:function(){},isShown:!1,initializeEventHandler:function(){var e=this;this.$clipArtConainer.find(".btn-close-page").click(function(i){e.close()}),this.$clipArtConainer.find(".view_th").click(function(e){$(this).addClass("select"),$(".view_list").removeClass("select"),$("#icon_container").removeClass("iconlist_b"),$("#icon_container").addClass("iconlist_a")}),this.$clipArtConainer.find(".view_list").click(function(e){$(this).addClass("select"),$(".view_th").removeClass("select"),$("#icon_container").removeClass("iconlist_a"),$("#icon_container").addClass("iconlist_b")}),this.$clipArtConainer.find(".newpage_btn_close").click(function(i){e.close()}),this.$clipArtConainer.find(".sort").click(function(i){i.preventDefault(),e.$clipArtConainer.find(".sort").removeClass("select"),$(this).addClass("select");var t=$(this).data("sort"),c=e.$clipArtConainer.find("#icon_container"),n=e.$clipArtConainer.find(".clip_art");n.sort(function(e,i){var c=e.getAttribute(t),n=i.getAttribute(t);return console.log(c+" : "+n),c<n?-1:c>n?1:0}),n.detach().appendTo(c)})},show:function(){this.isShown&&this.close();var e=this;this.$clipArtConainer=$(A3Maker.clipArtHTML),$("body").prepend(this.$clipArtConainer),this.$clipArtTree=this.$clipArtConainer.find("#clip_cate_tree"),this.$clipArtConainer.show(),this.initializeEventHandler();var i=5;clipArt_cate1_code_d2=-1,clipArt_cate1_code_d3=-0;var t=5;clipArt_cate2_code_d2=-1,clipArt_cate2_code_d3=-1;var c=[];A3Maker.api.A3MakerApi("loadCode",{code_d1:i,code_d2:clipArt_cate1_code_d2,code_d3:clipArt_cate1_code_d3},function(i){if(0==i.resultCode){var n=i.searchResult;console.log("클립 카레고리 1"),console.log(n),A3Maker.api.A3MakerApi("loadCode",{code_d1:t,code_d2:clipArt_cate2_code_d2,code_d3:clipArt_cate2_code_d3},function(i){if(0==i.resultCode){var t=i.searchResult;console.log("클립 카레고리 2"),console.log(t),$.each(n,function(e,i){var n=i.code_name,o=i.code_d1,r=i.code_d2,s=i.code_d3,a=i.code_seq,l={text:n,id:a,d1:o,d2:r,d3:s,code_seq:a,level_deps:1,children:[]};$.each(t,function(e,i){var t=i.code_name,c=i.code_d1,n=i.code_d2,o=i.code_d3,s=i.code_seq;r==n&&l.children.push({text:t,id:s,d1:c,d2:n,d3:o,code_seq:s,level_deps:2,id:s})}),c.push(l)}),e.$clipArtTree.on("loaded.jstree",function(){e.$clipArtTree.jstree("open_all"),e.$clipArtTree.jstree("select_node","#115"),e.$clipArtTree.jstree("activate_node","#115"),e.$clipArtTree.jstree("show_icons"),e.$clipArtTree.jstree("show_dots")}),e.$clipArtTree.jstree({core:{data:c,open_parents:!0,load_open:!0,themes:{icons:!0,dots:!0}},plugins:["theme"]}),e.$clipArtTree.bind("select_node.jstree",function(i,t){var c=t.node.original;1!=c.level_deps&&e.loadClipArts(c.code_seq)})}else alert(i.resultMsg)})}else alert(i.resultMsg)})},loadClipArts:function(e){var i={code_seq:e},t=this;A3Maker.api.A3MakerApi("loadClipArts",i,function(e){console.log(e);var i=e.searchResult.list;$clipArtUL=t.$clipArtConainer.find("#icon_container"),$clipArtUL.empty(),$.each(i,function(e,i){var c=$('<li class ="clip_art"></li>').attr({name:i.name,type:i.type,size:i.size,modified:i.date}).css("border","1px solid #ddd"),n=$("<img/>");n.attr("src",i.url),c.append(n);var o=$("<div></div>");o.append('<p class="filename"><a href="">'+i.name+"</a></p>");var r=new Date(i.date);o.append('<p class="fileinfo">'+r.toLocaleString()+"<br />Type : "+i.type+"  <span>/</span>  Source : file <span>/</span> Size : "+i.width+"*"+i.height+" ("+parseInt(i.size/1024)+"KB)</p>"),c.append(o),$clipArtUL.append(c),c.click(function(e){var i=A3Maker.getSelectedComponent();i.setImage(n.attr("src")),t.close()})}),$(".view_th").addClass("select"),$(".view_list").removeClass("select")})},close:function(){this.$clipArtConainer.hide(),this.$clipArtConainer.remove(),this.isShown=!1}},A3Maker.clipArt.init()});