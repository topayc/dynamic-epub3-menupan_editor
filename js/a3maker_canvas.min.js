A3Maker=A3Maker||{},$(function(){A3Maker.canvas={zoom:100,displayZoom:0,zoomGap:0,canvasWidth:"",canvasHeight:"",snap:1,zoomUnit:1,pageLeftMargin:17,pageTopMargin:17,$ruller:"",$canvas:"",$rulerSelector:"",$cavasSelector:"",$sanpSelector:"",$zoomValueSelector:"",$zoomUpSelector:"",$soomDownSelectr:"",init:function(){this.initializeSnapEventHandler(),this.initializeZoomEventHandler(),this.initCanvas(),this.adjustCanvas(),this.adjustRuler()},initCanvas:function(){this.findZooomOnWindowSize(),$(A3Maker.holder).css("left","17px"),$(A3Maker.holder).css("top","17px")},initializeSnapEventHandler:function(){this.$snapSelector=$("#snap_select"),this.$snapSelector.val("1");var t=this;this.$snapSelector.change(function(o){t.snapValue=parseInt($(this).val())})},initializeZoomEventHandler:function(){var t=this;$(".zoomout").click(function(o){t.displayZoom=parseInt($(".zoomvalue").val())-t.zoomUnit,t.zoom=t.zoom-t.zoomUnit,$("#project_real_zoom").html(t.zoom),$(".zoomvalue").val(t.displayZoom+"%"),t.adjustCanvas(),t.adjustRuler()}),$(".zoomin").click(function(o){t.displayZoom=parseInt($(".zoomvalue").val())+t.zoomUnit,t.zoom=t.zoom+t.zoomUnit,$("#project_real_zoom").html(t.zoom),$(".zoomvalue").val(t.displayZoom+"%"),t.adjustCanvas(),t.adjustRuler()})},findZooomOnWindowSize:function(){this.windowWidth=$(window).innerWidth(),this.windowHeight=$(window).innerHeight();for(var t=A3Maker.project.height,o=parseInt($(".content_container").innerHeight()),r=100;r>10;r-=this.zoomUnit)if(t*(r/100),t*(r/100)<o-70){this.zoom=r,100!=this.zoom?this.displayZoom=100:this.displayZoom=this.zoom;break}$("#project_real_zoom").html(this.zoom),this.canvasWidth=A3Maker.project.width*(this.zoom/100),this.canvasHeight=A3Maker.project.height*(this.zoom/100),$(".zoomvalue").val(this.zoom+"%")},adjustCanvas:function(){var t=this.zoom/100,o="0% 0%";$(A3Maker.holder).css({"-moz-transform-origin":o,"transform-origin":o,"-ms-transform-origin":o,"-webkit-transform-origin":o}),$(A3Maker.holder).css({transform:"scale("+t+","+t+" )"})},adjustComponentSize:function(){var t=this;$.each(A3Maker.project.pages,function(o,r){$.each(r.childs,function(o,r){var e=r.x,i=r.y,a=r.width,n=r.height,s=parseInt(e*(t.zoom/100))-r.cornerActionTriggerRadius,l=parseInt(i*(t.zoom/100))-r.cornerActionTriggerRadius,h=parseInt(a*(t.zoom/100)),m=parseInt(n*(t.zoom/100));$(r.externalWrapperQueryStr).css("left",s+"px"),$(r.externalWrapperQueryStr).css("top",l+"px"),$(r.originalElement).css("width",h+"px"),$(r.originalElement).css("height",m+"px"),r.adjustWrapper()})})},adjustRuler:function(){var t=this.zoom/100;t<0&&(this.rulerTopStartX-this.rulerTopStartX*(1-t),this.rulerLeftStartY,this.rulerLeftStartY),1==t&&(this.rulerTopStartX,this.rulerLeftStartY),t>1&&(this.rulerTopStartX+this.rulerTopStartX*(t-1),this.rulerLeftStartY,this.rulerLeftStartY),$(".content_container").ruler({startX:-0,startY:-0,showLabel:!0,arrowStyle:"arrow",ratio:t}).ruler("refresh")}}});