A3Maker=A3Maker||{},$(function(){A3Maker.propertyWindow={isShown:!1,propertyWindow:$("#element"),propertyType:"",propertyTypes:["page","image","text","link","order","popup","list","listrow"],name:"",isPositionFixed:!0,positionX:20,positionY:100,propertyWindowWidth:0,$name:$("#element .field_value_name"),$x:$("#element .field_value_x"),$y:$("#element .field_value_y"),$width:$("#element .field_value_w"),$height:$("#element .field_value_h"),$fixRatio:$("#element .field_value_owhyn"),$fixed:$("#element .field_value_fixed"),$fontSelect:$("#element .field_value_fontface"),$fontSizeSelect:$("#element .field_value_size"),$fontWeightSelect:$("#element .field_value_font_weight"),$colorPicker:$("#element .field_value_color"),$textContent:$("#element .field_value_content"),$backColorPicker:$("#element .field_value_backcolor"),$lineColorPicker:$("#element .field_value_line_color"),$fillStylePicker:$("#element .field_value_fill_style"),$pageTypeSelect:$("#element .field_value_linktype"),$linkPageSelectDiv:$("#element .linkPageSelectDiv"),$linkPopupSelectDiv:$("#element .linkPopupSelectDiv"),$linkPageSelect:$("#element .field_value_linkpage"),$linkPopupSelect:$("#element .field_value_linkpopup"),$linkWebText:$("#element .field_value_linkweb"),$phoneNumberText:$(".field_value_linkphonenumber"),$youTubeText:$(".field_value_linkyoutube"),$mallInMallText:$(".field_value_linkmallinmall"),$emailText:$(".field_value_linkEmail"),$mapDiv:$(".link_map"),$mapText:$(".field_value_linkmap"),$menuName:$("#element .field_value_menu_name"),$menuCode:$("#element .field_value_menu_code"),$menuPrice:$("#element .field_value_menu_price"),$menuDes:$("#element .field_value_menu_des"),$menuDiscount:$("#element .field_value_menu_discount"),$menuStock:$("#element .field_value_menu_stock"),$storeCode:$("#element .field_value_store_code"),$menuGroupName:$("#element .field_value_menu_group_name"),orderChangeBtn:$("#element .menuLoading_btn"),$uploadFake:$('div[name="uploadFake"]'),$uploadImgSelector:$("#attach"),$uploadImageFrm:$(".upload_image_frm"),$radiusHandle:$("#radius_handle"),$opacityHandle:$("#opacity_handle"),$linewidthHandle:$("#linewidth_handle"),$lineCapSelect:$("#element .field_value_linecap"),$lineJoinSelect:$("#element .field_value_linejoin"),initPane:!1,pane:null,generalFolder:null,PARAMS:{top:0,left:0,width:0,height:0,color:"#000000",name:"ahn","background-color":"#00FFFF",opacity:1,"border-radius":0,"font-width":10,scale:"25",fixRatio:!0,mouseLock:!1,"font-color":"#0000000","font-size":"8","font-family":"굴림, Gulim, Arial, sans-serif",text:"",linkType:"",position:"",linkTarget:"",menuGroupCode:"M1",menuGroupName:"한식",storeCode:"S1",menuName:"라면",menuPrice:11e4,menuCode:"S1_M1_C1",menuDes:"시그니쳐 음식",menuUnit:"원",menuStock:100,menuDiscount:1e6,strokeStyle:"#000000",fillStyle:"#FFFFFF",lineWidth:8,lineJoin:"round",lineCap:"round",isDrawing:!1,isErasing:!1,attention:"판서는 전체 화면을 가리고 있어요.다른 컴포넌트를 선택하려면 좌측 트리에서 컴포넌트를 선택하세요",autoEvent:!1,resolutionType:"VGA",micVolume:5,useAudio:!0,useVidwo:!0,videoStatus:null,facingMode:"user"},initControl:function(e){},initControl1:function(){var e=this;this.$uploadFake.css("cursor","pointer"),this.propertyWindowWidth=this.propertyWindow.width(),this.propertyWindow.draggable({containment:"#vertical_table",start:function(){e.isPositionFixed=!0},drag:function(){e.isPositionFixed=!0},stop:function(){if(e.isPositionFixed){var t=$(this).position();e.positionX=t.left,e.positionY=t.top}}}),this.initializeEventHandler()},showPropertyWindow:function(e){e=e;var t=this,a=null;if(a="page"==e?A3Maker.getSelectedPage().data:A3Maker.getSelectedComponent().data,Object.assign(this.PARAMS,a),this.PARAMS["font-weight"]=parseInt(this.PARAMS["font-weight"]),this.PARAMS.menuPrice=parseInt(this.PARAMS.menuPrice),this.PARAMS.menuStock=parseInt(this.PARAMS.menuStock),this.pane=A3Maker.pane,this.pane.hidden=!1,this.pane.title=e.toUpperCase()+" COMPONENT",this.pane.element.querySelector(".tp-rotv_t").style.color="#cccccc",this.pane.element.querySelector(".tp-rotv_t").style.fontSize="11px",this.generalFolder&&(this.generalFolder.dispose(),this.generalFolder=null),this.linkFolder&&(this.linkFolder.dispose(),this.linkFolder=null),this.textFolder&&(this.textFolder.dispose(),this.textFolder=null),this.orderFolder&&(this.orderFolder.dispose(),this.orderFolder=null),this.canvasFolder&&(this.canvasFolder.dispose(),this.canvasFolder=null),this.recorderFolder&&(this.recorderFolder.dispose(),this.recorderFolder=null),this.generalFolder=this.pane.addFolder({title:"GENERAL SETTING"}),this.nameBinding=this.generalFolder.addBinding(this.PARAMS,"name",{label:"NAME"}).on("change",e=>{t.changeComponentName({name:t.PARAMS.name})}),this.nameBinding.element.querySelector("input").style.color="#cccccc",this.xBinding=this.generalFolder.addBinding(this.PARAMS,"left",{label:"X POS",format:e=>e.toFixed(0)}).on("change",e=>t.updatePositionAndWidth()),this.xBinding.element.querySelector("input").style.color="#cccccc",this.xBinding.element.querySelector("input").style.textAlign="start",this.yBinding=this.generalFolder.addBinding(this.PARAMS,"top",{label:"Y POS",format:e=>e.toFixed(0)}).on("change",e=>t.updatePositionAndWidth()),this.yBinding.element.querySelector("input").style.color="#cccccc",this.yBinding.element.querySelector("input").style.textAlign="start",this.widthBinding=this.generalFolder.addBinding(this.PARAMS,"width",{label:"WIDTH",format:e=>e.toFixed(0)}).on("change",e=>t.updatePositionAndWidth()),this.widthBinding.element.querySelector("input").style.color="#cccccc",this.widthBinding.element.querySelector("input").style.textAlign="start",this.heigthBinding=this.generalFolder.addBinding(this.PARAMS,"height",{label:"HEIGHT",format:e=>e.toFixed(0)}).on("change",e=>t.updatePositionAndWidth()),this.heigthBinding.element.querySelector("input").style.color="#cccccc",this.heigthBinding.element.querySelector("input").style.textAlign="start",this.mouseLockBinding=this.generalFolder.addBinding(this.PARAMS,"mouseLock",{label:"MOUSE LOCK"}).on("change",e=>{}).on("change",e=>t.updateData({mouseLock:e.value})),this.fixRatioBinding=this.generalFolder.addBinding(this.PARAMS,"fixRatio",{label:"FIX RATIO"}).on("change",e=>{}).on("change",e=>t.updateData({fixRatio:e.value})),this.opacityBinding=this.generalFolder.addBinding(this.PARAMS,"opacity",{step:.1,min:0,max:1,label:"OPACITY"}).on("change",e=>t.updateData({opacity:e.value})),this.borderRadiusBinding=this.generalFolder.addBinding(this.PARAMS,"border-radius",{step:1,min:0,max:50,label:"RADIUS"}).on("change",e=>t.updateData({"border-radius":e.value})),"link"!=e&&"image"!=e&&"order"!=e&&"camera"!=e&&(this.backColorBinding=this.generalFolder.addBinding(this.PARAMS,"background-color",{color:{alpha:!0},label:"BACK COLOR"}).on("change",function(e){var t=e.value;if(A3Maker.getSelectedPage())if(A3Maker.getSelectedComponent())A3Maker.getSelectedComponent().setData({"background-color":t});else{var a=A3Maker.getSelectedPage();a.setData({"background-color":t}),a.refresh()}})),this.$uploadImgSelector.change(function(e){if("test"==A3Maker.mode){var a=e.target.files[0];$("#abmsProjectNo").val(A3Maker.project.projectSeq);const i=new FileReader;i.readAsDataURL(a),i.onload=function(e){A3Maker.getSelectedPage()&&(A3Maker.getSelectedComponent()?A3Maker.getSelectedComponent().setData({"background-image":e.target.result}):(A3Maker.getSelectedPage().data["background-image"]=e.target.result,A3Maker.getSelectedPage().$pageHolderSelector.css("background-image","url("+e.target.result+")"))),t.$uploadImgSelector.val(""),t.isUploading=!1,A3Maker.sidebar.updateSideThumbnailView()}}else $("#abmsProjectNo").val(A3Maker.project.projectSeq),t.$uploadImageFrm.submit()}),this.generalButtonBinding=this.generalFolder.addBlade({view:"buttongrid",size:[2,2],cells:(e,t)=>({title:[["BACKGROUND IMAGE","DOWNLOAD IMAGE"],["RESET IMAGE","CLIP ART"]][t][e]})}).on("click",e=>{switch(e.cell.title){case"BACKGROUND IMAGE":t.$uploadImgSelector.trigger("click");break;case"DOWNLOAD IMAGE":var a=A3Maker.getSelectedComponent()?A3Maker.getSelectedComponent():A3Maker.getSelectedPage();if(""!=a.data["background-image"]&&a.data["background-image"].startsWith("/")){if(confirm("이미지를 다운로드 하시겠습니까")){console.log("다운로드 파일 : "+a.src),$("#ifrm").length>0&&$("#ifrm").remove();var i="/abms/A3Maker/downloadResource?projectSeq="+A3Maker.project.projectSeq+"&fileName="+a.src,n="<iframe style ='width:0px;height:0px' id='ifrm' src='"+i+"'>";$("body").append(n)}}else if(a.data["background-image"].startsWith("data:image")){var o=a.data["background-image"].split(";")[0].split("/")[1];"jpeg"==o&&(o="jpg");var l=l=A3Maker.project.projectName.replace(/ /g,"_")+"_"+$.datepicker.formatDate("yymmdd",new Date)+"."+o;console.log(l);var r=document.createElement("a");r.setAttribute("href",a.data["background-image"]),r.setAttribute("download",l),r.setAttribute("id","tempDownLoadTag"),document.body.appendChild(r),r.click(),document.body.removeChild(r)}else alert("다운로드할 이미지가 없습니다");break;case"RESET IMAGE":a=A3Maker.getSelectedComponent()?A3Maker.getSelectedComponent():A3Maker.getSelectedPage();if(!a.data["background-image"]||a.data["background-image"].trim().length<1||a.data["background-image"].trim()==a.defaultsrc||""==a.data["background-image"])return void alert("설정되어 있는 이미지가 없습니다");1==confirm("설정된 이미지가 초기화 됩니다.")&&(A3Maker.getSelectedPage()&&(A3Maker.getSelectedComponent()?A3Maker.getSelectedComponent().setData({"background-image":"","border-radius":0}):A3Maker.getSelectedPage().setData({"background-image":""})),A3Maker.sidebar.updateSideThumbnailView());break;case"CLIP ART":A3Maker.clipArt.show()}}),"link"==e){this.linkFolder=this.pane.addFolder({title:"LINK SETTING"}),this.linkTypeSeletBinding=this.linkFolder.addBlade({view:"list",label:"LINK TYPE",options:[{text:"페이지 연결",value:"PageLink"},{text:"팝업",value:"Popup"},{text:"웹",value:"Web"},{text:"유튜브",value:"YouTube"},{text:"지도",value:"Map"},{text:"이메일",value:"Email"},{text:"전화번호",value:"Phonenumber"}],value:this.PARAMS.linkType?this.PARAMS.linkType:"PageLink"}).on("change",e=>{var a=A3Maker.getSelectedComponent();$(a.externalWrapperQueryStr+" .component-link").attr("linktype",e.value),this.linkTargetSelectBinding.hiddne=!0,this.linkTargetInputBinding.hidden=!0,A3Maker.getSelectedComponent().data.linkType=e.value,A3Maker.getSelectedComponent().data.linkTarget="",A3Maker.getSelectedComponent().data.position="",this.PARAMS.linkType=e.value,this.PARAMS.linkTarget="",this.PARAMS.position="";var i=[{text:"선택",value:""}];switch(e.value){case"PageLink":this.linkTargetSelectBinding.hidden=!1,this.linkTargetInputBinding.hidden=!0,A3Maker.project.pages.forEach(e=>i.push({text:e.data.name,value:e.data.id})),this.linkTargetSelectBinding.options=i,this.linkTargetSelectBinding.value=this.PARAMS.position?this.PARAMS.position:"";break;case"Popup":t.linkTargetSelectBinding.hidden=!1,t.linkTargetInputBinding.hidden=!0,A3Maker.getSelectedPage().findComponents("popup").forEach(e=>i.push({text:e.data.name,value:e.data.id})),this.linkTargetSelectBinding.options=i,this.linkTargetSelectBinding.value=this.PARAMS.position?this.PARAMS.position:"";break;case"MallinMall":case"Web":case"Phonenumber":case"YouTube":case"Email":case"Media":case"Map":default:this.linkTargetSelectBinding.hidden=!0,this.linkTargetInputBinding.hidden=!1,console.log(this.PARAMS.position),this.linkTargetInputBinding.value=this.PARAMS.position?this.PARAMS.position:""}}),this.linkTargetSelectBinding=this.linkFolder.addBlade({view:"list",label:"TARGET",options:[],value:t.PARAMS.linkTarget}).on("change",e=>{console.log(e.value),A3Maker.getSelectedComponent().data.linkTarget=e.value,A3Maker.getSelectedComponent().data.position=e.value;var t=A3Maker.getSelectedComponent();$(t.externalWrapperQueryStr+" .component-link").attr("position",e.value)}),this.linkTargetInputBinding=this.linkFolder.addBinding(this.PARAMS,"linkTarget",{label:"TARGET"}).on("change",e=>{A3Maker.getSelectedComponent().data.position=e.value,A3Maker.getSelectedComponent().data.linkTarget=e.value;var t=A3Maker.getSelectedComponent();$(t.externalWrapperQueryStr+" .component-link").attr("position",e.value)}),this.linkTargetInputBinding.element.querySelector("input").style.border="1px solid #999999",this.linkTargetInputBinding.element.querySelector("input").style.color="#ffffff",this.linkTargetInputBinding.element.querySelector("input").setAttribute("placeholder","Eamil,Map, Web,YouTubre etc");var i=[{text:"선택",value:""}];if("PageLink"==this.PARAMS.linkType)A3Maker.project.pages.forEach(e=>i.push({text:e.data.name,value:e.data.id})),this.linkTargetSelectBinding.options=i,this.linkTargetSelectBinding.value=this.PARAMS.position?this.PARAMS.position:"",this.linkTargetSelectBinding.hidden=!1,this.linkTargetInputBinding.hidden=!0,this.linkTargetInputBinding.element.querySelector("input").value="";else if("Popup"==this.PARAMS.linkType){this.linkTargetSelectBinding.hidden=!1,this.linkTargetInputBinding.hidden=!0;var n=A3Maker.getSelectedPage(),o=n.findComponents("popup");o.forEach(e=>i.push({text:e.data.name,value:e.data.id})),this.linkTargetSelectBinding.options=i,this.linkTargetSelectBinding.value=this.PARAMS.position?this.PARAMS.position:"",this.linkTargetInputBinding.element.querySelector("input").value=""}else(this.PARAMS.position||this.PARAMS.linkTarget)&&(this.linkTargetInputBinding.element.querySelector("input").value=this.PARAMS.position),this.linkTargetSelectBinding.hidden=!0,this.linkTargetInputBinding.hidden=!1}if("text"==e&&(this.textFolder=this.pane.addFolder({title:"TEXT SETTING"}),this.fontListBinding=fontList=this.textFolder.addBlade({view:"list",label:"FONT",options:[{text:"굴림",value:"굴림, Gulim, Arial, sans-serif"},{text:"돋음",value:"돋음, Dotum, Baekmuk Dotum, Undotum, Apple Gothic, Latin font, sans-serif"},{text:"바탕",value:"바탕, Dotum, Baekmuk Dotum, Undotum, Apple Gothic, Latin font, sans-serif"},{text:"Open Sans",value:"Open Sans"},{text:"Open Sans bold",value:"pen Sans|700"},{text:"Arial",value:"Arial"},{text:"Verdana",value:"Verdana"},{text:"Impact",value:"Impact"},{text:"Comic Sans MS",value:"Comic Sans MS"},{text:"Amatic SC",value:"Amatic SCs"},{text:"Special Elite",value:"Open Sans"},{text:"Chelsea Market",value:"Chelsea Market"},{text:"Comfortaa",value:"Comfortaa"},{text:"Comfortaa bold",value:"Comfortaa|7"},{text:"Monoton",value:"Monoton"},{text:"Shrikhand",value:"Shrikhand"},{text:"Abril Fatface",value:"Abril Fatface"},{text:"Anton",value:"Anton"},{text:"Gloria Hallelujah",value:"Gloria Hallelujah"},{text:"Poiret One",value:"Poiret One"},{text:"Permanent Marker",value:"Permanent Marker"},{text:"Philosopher",value:"Philosopher"},{text:"Bevan",value:"Bevan"},{text:"Nanum Pen Script",value:"Nanum Pen Script"},{text:"Nanum Brush Script",value:"Nanum Brush Script"},{text:"Nanum Gothic",value:"Anton"},{text:"Malgun Gothic",value:"Malgun Gothic"},{text:"Nanum Myeongjo",value:"Nanum Myeongjo"},{text:"Jeju Gothic",value:"Jeju Gothic"}],value:this.PARAMS["font-family"]}).on("change",function(e){var t=A3Maker.getSelectedComponent();"text"==t.data.type&&t.setData({"font-family":e.value})}),$(fontList.element).find("option").map(function(){var e=this.value;-1!=e.indexOf("|")?($(this).css("font-family",$(this).val().split("|")[0]),$(this).css("font-weight",$(this).val().split("|")[1])):$(this).css("font-family",$(this).val())}),this.fontSizeBinding=this.textFolder.addBlade({view:"list",label:"FONT SIZE",options:[{text:"9pt",value:"9pt"},{text:"10pt",value:"10pt"},{text:"11pt",value:"11pt"},{text:"12pt",value:"12pt"},{text:"13pt",value:"13pt"},{text:"14pt",value:"14pt"},{text:"15pt",value:"15pt"},{text:"16pt",value:"16pt"},{text:"17pt",value:"17pt"},{text:"18pt",value:"18pt"},{text:"19pt",value:"19pt"},{text:"20pt",value:"20pt"},{text:"21pt",value:"21pt"},{text:"22pt",value:"22pt"},{text:"23pt",value:"23pt"},{text:"24pt",value:"9pt"},{text:"25pt",value:"25pt"},{text:"26pt",value:"9pt"},{text:"27pt",value:"27pt"},{text:"28pt",value:"9pt"},{text:"29pt",value:"29pt"},{text:"29pt",value:"29pt"},{text:"30pt",value:"30pt"},{text:"31pt",value:"31pt"},{text:"32pt",value:"32pt"},{text:"33pt",value:"33pt"},{text:"34pt",value:"34pt"},{text:"35pt",value:"35pt"},{text:"36pt",value:"37pt"},{text:"38pt",value:"39pt"},{text:"40pt",value:"40pt"},{text:"40pt",value:"40pt"}],value:this.PARAMS["font-size"]}).on("change",function(e){var t=A3Maker.getSelectedComponent();"text"==t.data.type&&t.setData({"font-size":e.value})}),this.fontWeigthBinding=this.textFolder.addBinding(this.PARAMS,"font-weight",{step:100,min:100,max:1e3,label:"FONT WEIGHT"}).on("change",function(e){var t=A3Maker.getSelectedComponent();"text"==t.data.type&&t.setData({"font-weight":e.value})}),this.fontColorBinding=this.textFolder.addBinding(this.PARAMS,"color",{label:"FONT COLOR"}).on("change",e=>{A3Maker.getSelectedComponent();t.updateData({color:e.value})}),this.textBinding=this.textFolder.addBinding(this.PARAMS,"text",{view:"textarea",rows:5,multiline:!0,placeholder:"Type here...",label:"TEXT"}).on("change",e=>{A3Maker.getSelectedComponent();t.updateData({text:e.value})})),"order"==e&&(this.orderFolder=this.pane.addFolder({title:"ORDER SETTING"}),this.orderInfoLoadButtonBinding=this.orderFolder.addButton({title:"LOAD MENU INFO"}).on("click",e=>A3Maker.orderWindow.show(A3Maker.project.storeCode)),this.storeCodeBinding=this.orderFolder.addBinding(this.PARAMS,"storeCode",{label:"STORE CODE",readonly:!0}),this.menuGroupNameBinding=this.orderFolder.addBinding(this.PARAMS,"menuGroupName",{label:"MENU GROUP",readonly:!0}),this.menuCodeBinding=this.orderFolder.addBinding(this.PARAMS,"menuCode",{label:"MENU CODE",readonly:!0}),this.menuNameBinding=this.orderFolder.addBinding(this.PARAMS,"menuName",{label:"MENU NAME",readonly:!0}),this.menuDesBinding=this.orderFolder.addBinding(this.PARAMS,"menuDes",{label:"MENU DES",readonly:!0}),this.menuPriceBinding=this.orderFolder.addBinding(this.PARAMS,"menuPrice",{label:"MENU PRICE",readonly:!0,format:e=>parseInt(e).toLocaleString()+" 원"}),this.menuStockBinding=this.orderFolder.addBinding(this.PARAMS,"menuStock",{label:"MENU STOCK",readonly:!0,format:e=>parseInt(e).toLocaleString()+" 개"}),this.menuDisountBinding=this.orderFolder.addBinding(this.PARAMS,"menuDiscount",{label:"DISCOUNT",readonly:!0,format:e=>parseInt(e).toLocaleString()+" 원"})),"panseo"==e){this.canvasFolder=this.pane.addFolder({title:"CANVAS SETTING"});var l=this.canvasFolder.addBlade({view:"text",parse:e=>String(e),value:this.PARAMS.attention,readonly:!0});l.element.style.color="#cccccc",l.element.style.border="1px solid #aaaaaa",l.element.style.fontSize="10px",l.element.style.whiteSpace="normal",l.element.style.wordWrap="break-word",this.strokeStyleBinding=this.canvasFolder.addBinding(this.PARAMS,"strokeStyle",{label:"LINE COLOR"}).on("change",e=>{A3Maker.getSelectedPage()&&(A3Maker.getSelectedComponent()&&"panseo"==A3Maker.getSelectedComponent().data.type?A3Maker.getSelectedComponent().setData({strokeStyle:e.value}):alert("옳바른 사용법이 아닙니다. 먼저 판서컴포넌를 선택한 후 사용해주세요"))}),this.fillStyleBinding=this.canvasFolder.addBinding(this.PARAMS,"fillStyle",{label:"FILL COLOR"}).on("change",e=>{A3Maker.getSelectedPage()&&(A3Maker.getSelectedComponent()&&"panseo"==A3Maker.getSelectedComponent().data.type?A3Maker.getSelectedComponent().setData({fillStyle:e.value}):alert("옳바른 사용법이 아닙니다. 먼저 판서컴포넌를 선택한 후 사용해주세요"))}),this.lineWidthBinding=this.canvasFolder.addBlade({view:"slider",label:"LINE WIDTH",min:1,max:100,format:e=>e.toFixed(0),value:this.PARAMS.lineWidth?this.PARAMS.lineWidth:8}).on("change",e=>t.updateData({lineWidth:e.value})),this.lineCapBinding=this.canvasFolder.addBlade({view:"list",label:"LINE CAP",options:[{text:"DEFAULT",value:"default"},{text:"BUTT",value:"butt"},{text:"ROUND",value:"round"},{text:"SQUARE",value:"square"}],value:this.PARAMS.lineCap?this.PARAMS.lineCap:"default"}).on("change",e=>{var t=A3Maker.getSelectedComponent();"panseo"==t.data.type&&t.setData({lineCap:e.value})}),this.lineJoinBinding=this.canvasFolder.addBlade({view:"list",label:"LINE JOIN",options:[{text:"DEFAULT",value:"default"},{text:"VEVEL",value:"vevel"},{text:"ROUND",value:"round"},{text:"MITER",value:"miter"}],value:this.PARAMS.lineJoin?this.PARAMS.lineJoin:"default"}).on("change",e=>{var t=A3Maker.getSelectedComponent();"panseo"==t.data.type&&t.setData({lineJoin:e.value})}),this.canvasActionButtonBinding=this.canvasFolder.addBlade({view:"buttongrid",size:[2,2],cells:(e,t)=>({title:[["START DRAW","START ERASE"],["RESET DRAW","CLIPPING"]][t][e]})}).on("click",e=>{var t=A3Maker.getSelectedComponent();if("panseo"==t.data.type)switch(e.cell.title){case"START DRAW":var a=t.data.isErasing;if(a)return void alert("현재 지우개가 진행 중입니다. 지우기 중지를 한 후 실행해주세요");t.setData({isDrawing:!0}),e.cell.title="STOP DRAW",t.settingCanvas(A3Maker.config.CANVAS_MODE.START_DRAW);break;case"STOP DRAW":e.cell.title="START DRAW",t.setData({isDrawing:!1}),t.settingCanvas(A3Maker.config.CANVAS_MODE.STOP_DRAW);break;case"START ERASE":if(isDrawing=t.data.isDrawing,isDrawing)return void alert("현재 그리가가 진행 중입니다. 그리기 중지를 한 후 실행해주세요");t.setData({isErasing:!0}),e.cell.title="STOP ERASE",t.settingCanvas(A3Maker.config.CANVAS_MODE.START_ERASE_DRAW);break;case"STOP ERASE":e.cell.title="START ERASE",t.setData({isErasing:!1}),t.settingCanvas(A3Maker.config.CANVAS_MODE.STOP_ERASE_DRAW);break;case"RESET DRAW":t.settingCanvas(A3Maker.config.CANVAS_MODE.CLEAR_DRAW);break;case"CLIPPING":t.settingCanvas(A3Maker.config.CANVAS_MODE.CLIP_DRAW)}else alert("잘못된 사용입니다. 먼저 판서 컴포넌트를 선택해주세요")}),this.canvasDownButtonBinding=this.canvasFolder.addButton({title:"DOWNLOAD DRAWING"}).on("click",e=>selectedComponent.settingCanvas(A3Maker.config.CANVAS_MODE.DOWN_DRAW))}if("camera"==e){A3Maker.getSelectedComponent().VideoRecorder||(A3Maker.getSelectedComponent().VideoRecorder=new VideoRecorder(A3Maker.getSelectedComponent()));const e=A3Maker.getSelectedComponent().VideoRecorder;this.recorderFolder=this.pane.addFolder({title:"RECORDER SETTING"}),this.audioSelect=this.recorderFolder.addBinding(this.PARAMS,"useAudio",{label:"AUDIO"}).on("change",e=>{}).on("change",e=>t.updateData({useAudio:e.value})),this.micVulumnBinding=this.recorderFolder.addBinding(this.PARAMS,"micVolume",{step:1,min:0,max:100,label:"MIC VOLUME"}).on("change",e=>t.updateData({micVolume:e.value})),this.customSeettingfolder=this.recorderFolder.addFolder({title:"RESOLUTION CUSTOM"}),this.customWidthBinding=this.customSeettingfolder.addBinding(this.PARAMS,"width",{step:1,min:A3Maker.config.MIN_COMPONENT_SIZE,max:A3Maker.project.width,label:"WIDTH"}).on("change",e=>{this.setPosition(this.PARAMS.left,this.PARAMS.top,e.value,this.PARAMS.height),t.updatePositionAndWidth()}),this.customHeightBinding=this.customSeettingfolder.addBinding(this.PARAMS,"height",{step:1,min:A3Maker.config.MIN_COMPONENT_SIZE,max:A3Maker.project.height,label:"HEIGHT"}).on("change",e=>{this.setPosition(this.PARAMS.left,this.PARAMS.top,this.PARAMS.width,e.value),t.updatePositionAndWidth()}),"CUSTOM"==this.PARAMS.resolutionType?this.customSeettingfolder.hidden=!1:this.customSeettingfolder.hidden=!0,this.resolutonTypeBinding=this.recorderFolder.addBlade({view:"list",label:"RESOLUTION",options:[{text:"VGA(640X480)",value:"VGA"},{text:"QVGA(320X240)",value:"QVGA"},{text:"CUSTOM",value:"CUSTOM"}],value:this.PARAMS.resolutionType}).on("change",e=>{switch(e.value){case"CUSTOM":return this.customSeettingfolder.hidden=!1,void this.updateData({resolutionType:e.value});case"VGA":this.PARAMS.width=640,this.PARAMS.height=480;break;case"QVGA":t.PARAMS.width=320,t.PARAMS.height=240}this.customSeettingfolder.hidden=!0,this.setPosition(this.PARAMS.left,this.PARAMS.top,this.PARAMS.width,this.PARAMS.height),this.updateData({resolutionType:e.value}),this.updatePositionAndWidth()}),this.cameraTypeBinding=this.recorderFolder.addBlade({view:"list",label:"CAMERA",options:[{text:"FRONT",value:"user"},{text:"REAR",value:"environment"}],value:this.PARAMS.facingMode}).on("change",e=>t.updateData({facingMode:e.value}));var r=this.PARAMS.videoStatus;this.recorderActionButtonBinding=this.recorderFolder.addBlade({view:"buttongrid",size:[2,3],cells:(e,t)=>({title:[[r.isPlaying?"STOP VIDEO":"START VIDEO",r.isPausing?"RESUME":"PAUSE"],[r.isRecording?"STOP RECORD":"START RECORD",r.isPreviewing?"STOP PREVIEW":"PREVIEW"],["DATA RESET","DOWNLOAD VIDEO"]][t][e]})}).on("click",a=>{t.handleRecorderAction(a,e)})}this.pane.refresh()},handleRecorderAction:function(e,t){var a=A3Maker.getSelectedComponent();if("camera"==a.data.type)switch(e.cell.title){case"START VIDEO":var i=t.start();i.then(t=>{t?(a.data.videoStatus.isPlaying=!0,this.PARAMS.videoStatus.isPlaying=!0,e.cell.title="STOP VIDEO"):(a.data.videoStatus.isPlaying=!1,this.PARAMS.videoStatus.isPlaying=!1,e.cell.title="START VIDEO")});break;case"STOP VIDEO":e.cell.title="START VIDEO",t.stop(),a.data.videoStatus.isPlaying=!1,a.data.videoStatus.isRecording=!1,a.data.videoStatus.isPausing=!1,a.data.videoStatus.isPreviewing=!1,this.PARAMS.videoStatus.isPlaying=!1,this.PARAMS.videoStatus.isRecording=!1,this.PARAMS.videoStatus.isPausing=!1,this.PARAMS.videoStatus.isPreviewing=!1,this.PARAMS.videoStatus.isPausing=!1,this.recorderActionButtonBinding.cell(1,0).title="PAUSE",this.recorderActionButtonBinding.cell(0,1).title="START RECORD",this.recorderActionButtonBinding.cell(1,1).title="PREVIEW";break;case"PAUSE":if(!a.data.videoStatus.isPlaying)return;if(a.data.videoStatus.isRecording)return void alert("현재 레코딩이 진행중입니다. 레코딩을 중단하고 다시 시도해주세요");e.cell.title="RESUME",t.pause(),a.data.videoStatus.isPausing=!0,this.PARAMS.videoStatus.isPausing=!0;break;case"RESUME":e.cell.title="PAUSE",t.resume(),a.data.videoStatus.isPausing=!1,this.PARAMS.videoStatus.isPausing=!1;break;case"START RECORD":if(!a.data.videoStatus.isPlaying)return void alert("현재 카메라 데이타를 수신중이 아닙니다. START VIDEO를 눌러서 카메라 수신을 시작핮 후 레코딩을 해주세요");if(a.data.videoStatus.isPausing)return void alert("현재 Pause 상태입니다.. RESUME을 눌러서 카메라 수신을 시작한 후 다시 시도해주세요");e.cell.title="STOP RECORD",t.startRecording(),a.data.videoStatus.isRecording=!0,this.PARAMS.videoStatus.isRecording=!0;break;case"STOP RECORD":e.cell.title="START RECORD",t.stopRecording(),a.data.videoStatus.isRecording=!1,this.PARAMS.videoStatus.isRecording=!1;break;case"PREVIEW":i=t.playPreview();a.data.videoStatus.isPreviewing=!!i,this.PARAMS.videoStatus.isPreviewing=!!i,e.cell.title=i?"STOP PREVIEW":"PREVIEW";break;case"STOP PREVIEW":e.cell.title="PREVIEW",t.stopPreview(),a.data.videoStatus.isPreviewing=!1,this.PARAMS.videoStatus.isPreviewing=!1}else alert("잘못된 사용입니다. 먼저 판서 컴포넌트를 선택해주세요")},changeComponentName:function(e){if(e.name.length<1||""==e.name)alert("컴퍼넌트 이름은 공백이 될 수 없습니다");else{var t=A3Maker.getSelectedPage(),a=A3Maker.getSelectedComponent();if(t)if(a){if(a.data.name==e.name)return;if(t.hasSameNamedComponent(e.name))return void alert("해당 페이지 안에 중복된 이름의 컴포넌트가 있습니다. 이름을 변경해주세요");a.setData(e);var i=A3Maker.controller.$tree.tree("getNodeById",a.data.UUID);A3Maker.controller.$tree.tree("updateNode",i,e.name)}else{if(t.data.name.trim()==e.name)return;if(A3Maker.getProject().hasSameNamedPage(e.name))return void alert("페이지 이름이 중복됩니다. 중복되지 않은 이름으로 변경해해주세요");t.setData(e);i=A3Maker.controller.$tree.tree("getNodeById",t.data.UUID);A3Maker.controller.$tree.tree("updateNode",i,e.name)}}},setData:function(e,t){switch(e){case"name":this.PARAMS.name=t,this.nameBinding.refresh()}},hideAllLInkPositionElem:function(){this.$linkPageSelectDiv.hide(),this.$linkPopupSelectDiv.hide(),this.$linkWebText.hide(),this.$phoneNumberText.hide(),this.$youTubeText.hide(),this.$mallInMallText.hide(),this.$emailText.hide(),this.$mapDiv.hide()},resetAllLinkPositionElem:function(){this.$linkPageSelect.val(""),this.$linkPopupSelect.val(""),this.$linkWebText.val(""),this.$phoneNumberText.val(""),this.$youTubeText.val(""),this.$mallInMallText.val(""),this.$emailText.val(""),this.$mapText.val("")},updateBorder:function(e){var t=A3Maker.getSelectedComponent();t&&t.selectStatus&&(t.data.border=e,t.setBorder(e))},updatePositionAndWidth:function(e){e||(e={},e.top=this.PARAMS.top,e.left=this.PARAMS.left,e.width=this.PARAMS.width,e.height=this.PARAMS.height);var t=A3Maker.getSelectedComponent(),a=t.data.height;t&&(t.updatePositionAndWidth(e.left,e.top,e.width,e.height),"listrow"==t.data.type&&t.updatePositionNextRows(0,height-a))},onChangeComponent:function(e,t){var a=e.target.value.trim();if(a.length<1||""==a)return alert("콤퍼넌트 이름은 공백이 될 수 없습니다"),void $(t).focus();var i=A3Maker.getSelectedPage(),n=A3Maker.getSelectedComponent();if(i)if(n){if(n.data.name==a)return;if(i.hasSameNamedComponent(a))return alert("해당 페이지 안에 중복된 이름의 컴포넌트가 있습니다. 이름을 변경해주세요"),void $("#element .field_value_name").focus();n.setData({name:a});var o=A3Maker.controller.$tree.tree("getNodeById",n.data.UUID);A3Maker.controller.$tree.tree("updateNode",o,a)}else{if(i.data.name.trim()==a)return;if(A3Maker.getProject().hasSameNamedPage(a))return alert("페이지 이름이 중복됩니다. 중복되지않은 이름으로 변경해해주세요"),void $("#element .field_value_name").focus();i.setData("name",a);o=A3Maker.controller.$tree.tree("getNodeById",i.data.UUID);A3Maker.controller.$tree.tree("updateNode",o,a)}},initializeEventHandler:function(){var e=this;$("#element .field_value_x, #element .field_value_y, #element .field_value_w, #element .field_value_h").focusout(function(t){t.stopPropagation();var a=$(".field_value_name").val();if(""==a.trim())return alert("이름은 공백이 될 수 없습니다. 이름을 입력해주세요"),void $("#element .field_value_name").focus();e.updatePositionAndWidth($(this).parent().attr("id"))}),$("#element .field_value_x, #element .field_value_y, #element .field_value_w, #element .field_value_h").blur(function(t){t.stopPropagation(),e.updatePositionAndWidth($(this).parent().attr("id"))}),$("#element .field_value_x, #element .field_value_y, #element .field_value_w, #element .field_value_h").keyup(function(t){if(13==t.which){var a=$("#element .field_value_name").val();if(""==a.trim())return alert("이름은 공백이 될 수 없습니다. 이름을 입력해주세요"),void $("#element .field_value_name").focus();e.updatePositionAndWidth($(this).parent().attr("id"))}}),this.$name.keyup(function(t){13==t.which&&e.onChangeComponentName(t,this)}),$("#menuLoading_btn").click(function(e){A3Maker.orderWindow.show(A3Maker.project.storeCode)}),this.$fixRatio.click(function(e){var t=A3Maker.getSelectedComponent();if("order"==t.data.type||"image"==t.data.type||"link"==t.data.type){var a=t.data.left,i=t.data.top,n=t.data.width,o=t.data.height,l=$("#element .prop_"+t.data.type+" .field_value_owhyn").is(":checked"),r=0,d=0;if(1==l){var s=$(t.originalElementQueryStr).get(0).naturalWidth,c=$(t.originalElementQueryStr).get(0).naturalHeight;n>o?(r=parseInt(n),d=parseInt(c*n/s)):n<o?(r=parseInt(s*o/c),d=parseInt(o)):(r=parseInt(n),d=parseInt(c*n/s)),t.setPositionAndWidth(a,i,r,d)}A3Maker.getSelectedComponent().data.fixRatio=l}}),this.$lineCapSelect.change(function(e){var t=A3Maker.getSelectedComponent();"panseo"==t.data.type&&t.setData({lineCap:$(this).val()})}),this.$lineJoinSelect.change(function(e){var t=A3Maker.getSelectedComponent();"panseo"==t.data.type&&t.setData({lineJoin:$(this).val()})}),this.$fontSelect.change(function(e){var t=A3Maker.getSelectedComponent();"text"==t.data.type&&t.setData({"font-family":$(this).val()})}),this.$fontWeightSelect.change(function(e){var t=A3Maker.getSelectedComponent();"text"==t.data.type&&t.setData({"font-weight":$(this).val()})}),this.$fontSizeSelect.change(function(e){var t=A3Maker.getSelectedComponent();"text"==t.data.type&&t.setData({"font-size":$(this).val()})}),this.$textContent.bind("input propertychange",function(){var e=A3Maker.getSelectedComponent();e.data.text=$(this).val(),e.originalElement.find("textarea").val($(this).val())}),this.$backColorPicker.ColorPicker({onShow:function(e){return $(e).fadeIn(500),!1},onHide:function(e){return $(e).fadeOut(500),!1},onChange:function(t,a,i){var n="#"+a;if($("#back_color_container").css("background-color",n),A3Maker.getSelectedPage())if(A3Maker.getSelectedComponent())A3Maker.getSelectedComponent().setData({"background-color":n});else{var o=A3Maker.getSelectedPage();e.$backColorPicker.css("background-color",n),
o.setData("background-color",n),o.refresh()}}}),this.$lineColorPicker.ColorPicker({onShow:function(e){return $(e).fadeIn(500),!1},onHide:function(e){return $(e).fadeOut(500),!1},onChange:function(e,t,a){var i="#"+t;$("#line_color_container").css("background-color",i),A3Maker.getSelectedPage()&&(A3Maker.getSelectedComponent()&&"panseo"==A3Maker.getSelectedComponent().data.type?A3Maker.getSelectedComponent().setData({strokeStyle:i}):alert("옳바른 사용법이 아닙니다. 먼저 판서컴포넌를 선택한 후 사용해주세요"))}}),this.$fillStylePicker.ColorPicker({onShow:function(e){return $(e).fadeIn(500),!1},onHide:function(e){return $(e).fadeOut(500),!1},onChange:function(e,t,a){var i="#"+t;$("#fill_style_container").css("background-color",i),A3Maker.getSelectedPage()&&(A3Maker.getSelectedComponent()&&"panseo"==A3Maker.getSelectedComponent().data.type?A3Maker.getSelectedComponent().setData({fillStyle:i}):alert("옳바른 사용법이 아닙니다. 먼저 판서컴포넌를 선택한 후 사용해주세요"))}}),this.$colorPicker.ColorPicker({onShow:function(e){return $(e).fadeIn(500),!1},onHide:function(e){return $(e).fadeOut(500),!1},onChange:function(t,a,i){A3Maker.getSelectedComponent();var n="#"+a;e.$colorPicker.css("background-color",n),e.updateData({"font-color":n,color:n})}});$("#radius_handle");$("#radius_slider").slider({create:function(){e.$radiusHandle.text($(this).slider("value"))},slide:function(t,a){e.$radiusHandle.text(a.value),e.updateData({"border-radius":a.value})},min:0,max:50});$("#opacity_handle");$("#opacity_slider").slider({create:function(){e.$opacityHandle.text($(this).slider("value"))},slide:function(t,a){e.$opacityHandle.text(a.value),e.updateData({opacity:a.value/100})},min:0,max:100}),$("#linewidth_slider").slider({create:function(){e.$linewidthHandle.text($(this).slider("value"))},slide:function(t,a){e.$linewidthHandle.text(a.value),e.updateData({lineWidth:a.value})},min:1,max:100}),this.$pageTypeSelect.change(function(){e.hideAllLInkPositionElem();var t=$(this).val(),a=A3Maker.getSelectedComponent();switch(a.data.linkType=t,$(a.externalWrapperQueryStr+" .component-link").attr("linktype",t),t){case"PageLink":a.data.position=$("#element .field_value_linkpage option:selected").val(),e.setPageLinkSelect(),e.$linkPageSelect.val(a.position),e.$linkPageSelectDiv.show();break;case"Web":a.data.position=e.$linkWebText.val(),e.$linkWebText.show();break;case"Popup":a.data.position=$("#element .field_value_linkpopup option:selected").val(),e.setPopupSelect(),e.$linkPopupSelect.val(a.position),e.$linkPopupSelectDiv.show();break;case"Phonenumber":a.data.position=e.$phoneNumberText.val(),e.$phoneNumberText.show();break;case"YouTube":a.data.position=e.$youTubeText.val(),e.$youTubeText.show();break;case"MallinMall":a.data.position=e.$mallInMallText.val(),e.$mallInMallText.show();break;case"Email":a.data.position=e.$emailText.val(),e.$emailText.show();break;case"Map":a.data.position=e.$mapText.val(),e.$mapDiv.show()}}),this.$linkPageSelect.bind("change",function(e){var t=A3Maker.getSelectedComponent();t.data.position=$(this).val(),$(t.externalWrapperQueryStr+" .component-link").attr("position",$(this).val())}),this.$linkPopupSelect.bind("change",function(e){var t=A3Maker.getSelectedComponent();t.data.position=$(this).val(),$(t.externalWrapperQueryStr+" .component-link").attr("position",$(this).val())}),this.$phoneNumberText.focusout(function(e){var t=A3Maker.getSelectedComponent();t.data.position=$(this).val(),$(t.externalWrapperQueryStr+" .component-link").attr("position",$(this).val())}),this.$linkWebText.focusout(function(e){var t=A3Maker.getSelectedComponent();t.data.position=$(this).val(),$(t.externalWrapperQueryStr+" .component-link").attr("position",$(this).val())}),this.$phoneNumberText.keydown(function(e){if(13==e.which){var t=A3Maker.getSelectedComponent();t.data.position=$(this).val(),$(t.externalWrapperQueryStr+" .component-link").attr("position",$(this).val())}}),this.$linkWebText.keydown(function(e){if(13==e.which){var t=A3Maker.getSelectedComponent();t.data.position=$(this).val(),$(t.externalWrapperQueryStr+" .component-link").attr("position",$(this).val())}}),this.$youTubeText.bind("focusout keydown",function(e){if("keydown"!=e.type||13==e.which){var t=A3Maker.getSelectedComponent();t.data.position=$(this).val(),$(t.externalWrapperQueryStr+" .component-link").attr("position",$(this).val())}}),this.$emailText.bind("focusout keydown",function(e){if("keydown"!=e.type||13==e.which){var t=A3Maker.getSelectedComponent();t.data.position=$(this).val(),$(t.externalWrapperQueryStr+" .component-link").attr("position",$(this).val())}}),this.$mallInMallText.bind("focusout keydown",function(e){if("keydown"!=e.type||13==e.which){var t=A3Maker.getSelectedComponent();t.data.position=$(this).val(),$(t.externalWrapperQueryStr+" .component-link").attr("position",$(this).val())}}),this.$mapText.bind("focusout keydown",function(e){if("keydown"!=e.type||13==e.which){var t=A3Maker.getSelectedComponent();t.data.position=$(this).val(),$(t.externalWrapperQueryStr+" .component-link").attr("position",t.data.position)}}),$(".field_value_linkmap_lon").bind("focusout keydown",function(e){if("keydown"!=e.type||13==e.which){var t=A3Maker.getSelectedComponent();t.data.position=$(".field_value_linkmap_lat").val()+","+$(this).val(),$(t.externalWrapperQueryStr+" .component-link").attr("position",t.position)}}),this.$uploadFake.click(function(t){e.$uploadImgSelector.trigger("click")}),this.$uploadImgSelector.change(function(t){if("test"==A3Maker.mode){var a=t.target.files[0];$("#abmsProjectNo").val(A3Maker.project.projectSeq);const i=new FileReader;i.readAsDataURL(a),i.onload=function(t){A3Maker.getSelectedPage()&&(A3Maker.getSelectedComponent()?A3Maker.getSelectedComponent().setData({"background-image":t.target.result}):(A3Maker.getSelectedPage().data["background-image"]=t.target.result,A3Maker.getSelectedPage().$pageHolderSelector.css("background-image","url("+t.target.result+")"))),e.$uploadImgSelector.val(""),e.isUploading=!1,A3Maker.sidebar.updateSideThumbnailView()}}else $("#abmsProjectNo").val(A3Maker.project.projectSeq),e.$uploadImageFrm.submit()}),this.$uploadImageFrm.ajaxForm({beforeSubmit:function(t,a,i){return $(".ajax_center_loading").length<1&&(e.$centerLoadIngProgress=$(A3Maker.ajaxCenterLoadingHTML),$("body").prepend(e.$centerLoadIngProgress)),e.isUploading=!0,!0},success:function(t,a){e.$centerLoadIngProgress.hide(),e.$centerLoadIngProgress.remove();var i=t;if(100==i.resultCode){var n=i.data;A3Maker.getSelectedPage()&&(A3Maker.getSelectedComponent()?A3Maker.getSelectedComponent().setData({"background-image":n}):(A3Maker.getSelectedPage().data["background-image"]=n,A3Maker.getSelectedPage().$pageHolderSelector.css("background-image","url("+n+")"))),e.$uploadImgSelector.val(""),e.isUploading=!1,A3Maker.sidebar.updateSideThumbnailView()}else setTimeout(function(){alert(i.messageText)},30)},error:function(t,a,i){e.$centerLoadIngProgress.hide(),e.$centerLoadIngProgress.remove(),e.isUploading=!1;var n="업로드 에러  : "+i;alert(n)}}),$(".panseo_action").click(function(e){var t=$(this).data("action"),a=A3Maker.getSelectedComponent();if("panseo"==a.data.type)switch(t){case A3Maker.config.CANVAS_MODE.START_DRAW:var i=a.data.isErasing;if(i)return void alert("현재 지우개가 진행 중입니다. 지우기 중지를 한 후 실행해주세요");var n=!a.data.isDrawing,o=n?'<span style = "color : red">그리기 중지</span>':"그리기 시작",l=n?'<i style = "font-size: 13px;color: red" class="fa fa-ban" aria-hidden="true"></i>':'<i style = "font-size: 13px" class="fa fa-paint-brush"></i>';a.setData({isDrawing:n}),$(this).html(""),$(this).html(l+o),a.data.isDrawing?a.settingCanvas(A3Maker.config.CANVAS_MODE.START_DRAW):a.settingCanvas(A3Maker.config.CANVAS_MODE.STOP_DRAW);break;case A3Maker.config.CANVAS_MODE.CLIP_DRAW:a.settingCanvas(A3Maker.config.CANVAS_MODE.CLIP_DRAW);break;case A3Maker.config.CANVAS_MODE.CLEAR_DRAW:a.settingCanvas(A3Maker.config.CANVAS_MODE.CLEAR_DRAW);break;case A3Maker.config.CANVAS_MODE.DOWN_DRAW:a.settingCanvas(A3Maker.config.CANVAS_MODE.DOWN_DRAW);break;case A3Maker.config.CANVAS_MODE.ERASE_DRAW:if(n=a.data.isDrawing,n)return void alert("현재 그리가가 진행 중입니다. 그리기 중지를 한 후 실행해주세요");i=!a.data.isErasing;var r=i?'<span style = "color : red">지우개 중지</span>':"지우개 시작";l=i?'<i style = "font-size: 13px;color: red" class="fa fa-ban" aria-hidden="true"></i>':'<i style = "font-size: 13px" class="fa fa-eraser" aria-hidden="true"></i>';a.setData({isErasing:i}),$(this).html(""),$(this).html(l+r),a.data.isErasing?a.settingCanvas(A3Maker.config.CANVAS_MODE.START_ERASE_DRAW):a.settingCanvas(A3Maker.config.CANVAS_MODE.STOP_ERASE_DRAW)}else alert("잘못된 사용입니다. 먼저 판서 컴포넌트를 선택해주세요")}),$(".extra-action").click(function(){var t=$(this).data("action");switch(t){case"reset image":var a=A3Maker.getSelectedComponent()?A3Maker.getSelectedComponent():A3Maker.getSelectedPage();if(!a.data["background-image"]||a.data["background-image"].trim().length<1||a.data["background-image"].trim()==a.defaultsrc||""==a.data["background-image"])return void alert("설정되어 있는 이미지가 없습니다");1==confirm("설정된 이미지가 초기화 됩니다.")&&(A3Maker.getSelectedPage()&&(A3Maker.getSelectedComponent()?A3Maker.getSelectedComponent().setData({"background-image":"","border-radius":0}):A3Maker.getSelectedPage().setData("background-image","")),A3Maker.sidebar.updateSideThumbnailView());break;case"clipart":A3Maker.clipArt.show();break;case"upload_image":e.$uploadImgSelector.trigger("click");break;case"download_image":a=A3Maker.getSelectedComponent()?A3Maker.getSelectedComponent():A3Maker.getSelectedPage();if(""!=a.data["background-image"]&&a.data["background-image"].startsWith("/")){if(confirm("이미지를 다운로드 하시겠습니까")){$("#ifrm").length>0&&$("#ifrm").remove();var i="/abms/A3Maker/downloadResource?projectSeq="+A3Maker.project.projectSeq+"&fileName="+a.src,n="<iframe style ='width:0px;height:0px' id='ifrm' src='"+i+"'>";$("body").append(n)}}else if(a.data["background-image"].startsWith("data:image")){var o=a.data["background-image"].split(";")[0].split("/")[1];"jpeg"==o&&(o="jpg");var l=l=A3Maker.project.projectName.replace(/ /g,"_")+"_"+$.datepicker.formatDate("yymmdd",new Date)+"."+o,r=document.createElement("a");r.setAttribute("href",a.data["background-image"]),r.setAttribute("download",l),r.setAttribute("id","tempDownLoadTag"),document.body.appendChild(r),r.click(),document.body.removeChild(r)}else alert("다운로드할 이미지가 없습니다")}})},updateData:function(e){var t=A3Maker.getSelectedComponent();t?t.setData(e):A3Maker.getSelectedPage().setData(e)},setPageLinkSelect:function(){var e=this;this.$linkPageSelect.find("option").each(function(){this.value&&$(this).remove()}),$.each(A3Maker.project.pages,function(t,a){e.appendSelectItem(a)})},setPopupSelect:function(){var e=this;this.$linkPopupSelect.find("option").each(function(){""!=this.value&&$(this).remove()});var t=A3Maker.getSelectedPage(),a=t.findComponents("popup");$.each(a,function(t,a){e.appendSelectItem(a)})},setPosition:function(e,t,a,i){this.PARAMS.top=t,this.PARAMS.autoEvent=!0,this.PARAMS.left=e,this.PARAMS.width=a,this.PARAMS.height=i,this.xBinding.element.querySelector("input").value=e,this.yBinding.element.querySelector("input").value=t,this.widthBinding.element.querySelector("input").value=a,this.heigthBinding.element.querySelector("input").value=i;var n=A3Maker.getSelectedComponent();if(n&&"camera"==n.data.type&&"CUSTOM"==n.data.resolutionType){this.customWidthBinding.element.querySelector("input").value=a,this.customHeightBinding.element.querySelector("input").value=i;var o=A3Maker.project.width-A3Maker.config.MIN_COMPONENT_SIZE,l=A3Maker.project.height-A3Maker.config.MIN_COMPONENT_SIZE;this.customWidthBinding.element.querySelector(".tp-sldv_k").style.width=100*(a-A3Maker.config.MIN_COMPONENT_SIZE)/o+"%",this.customHeightBinding.element.querySelector(".tp-sldv_k").style.width=100*(i-A3Maker.config.MIN_COMPONENT_SIZE)/l+"%"}},setInitInfo:function(e){},movePropertyWindow:function(e,t){},setPropertyWindowPos:function(e,t){this.positionX=e,this.positionY=t,this.propertyWindow.css("right",this.positionX),this.propertyWindow.css("top",this.positionY)},appendSelectItem:function(e){switch(e.data.type){case"page":this.$linkPageSelect.append("<option value ='"+e.data.id+"'>"+e.data.name+"</option>");break;case"popup":this.$linkPopupSelect.append("<option value ='"+e.data.id+"'>"+e.data.name+"</option>")}},deleteSelectItem:function(e){switch(e.data.type){case"page":this.$linkPageSelect.find("option").each(function(){this.value==e.data.fullName&&$(this).remove()});break;case"popup":this.$linkPopupSelect.find("option").each(function(){this.value==e.data.fullName&&$(this).remove()})}},resetPropertyWindow:function(e){var t=A3Maker.getSelectedComponent();t=t||A3Maker.getSelectedPage(),"image"!=e&&"link"!=e&&"order"!=e||this.$uploadFake.show(),$(".field_value_x, .field_value_y, .field_value_w").removeAttr("disabled"),void 0!==t.data["border-radius"]?($("#radius_slider").slider({value:t.data["border-radius"]}),$("#radius_handle").text(t.data["border-radius"])):($("#radius_slider").slider({value:0}),$("#radius_handle").text(0)),void 0!==t.data.opacity?($("#opacity_slider").slider({value:parseInt(100*t.data.opacity)}),$("#opacity_handle").text(parseInt(100*t.data.opacity))):($("#opacity_slider").slider({value:0}),$("#opacity_handle").text(0)),void 0!==t.data.opacity?($("#opacity_slider").slider({value:parseInt(100*t.data.opacity)}),$("#opacity_handle").text(parseInt(100*t.data.opacity))):($("#opacity_slider").slider({value:0}),$("#opacity_handle").text(0)),void 0!==t.data.lineWidth?($("#linewidth_slider").slider({value:t.data.lineWidth}),$("#linewidth_handle").text(t.data.lineWidth)):($("#linewidth_slider").slider({value:0}),$("#linewidth_handle").text(0)),this.$textContent.val(""),this.$backColorPicker.css("background-color","f000"),this.$colorPicker.css("backgroundColor","#000")},setPropertyWindowTitle:function(e){$("#element .el_title .text").text(e)},extract:function(e){var t=this;$.each(e,function(e,a){t.PARAMS[e]=a})},setProperty:function(e,t){this.PARAMS[e]=t},closePropertyWindow:function(e,t,a){this.pane&&(this.pane.hidden=!0)}}});