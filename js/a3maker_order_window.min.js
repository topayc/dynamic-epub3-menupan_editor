A3Maker=A3Maker||{},$(function(){A3Maker.orderWindow={$orderWindow:"",$productGroupListContainer:"",$productListContainer:"",isProductSelected:!1,selectedProductGroupCode:-1,selectedProductGroupName:"",selectedProductCode:-1,selectedProductName:"",init:function(){},loadMenuGroupInfo:function(){var e=this;this.$productGroupListContainer.empty(),this.$productListContainer.empty(),A3Maker.api.A3MakerApi("loadProductGroup",{},function(t){if(0==t.resultCode){var o=t.searchResult;$.each(o,function(t,o){var r=o.grp_code,d=o.grp_name,s=(o.pos_menugroup_seq,$("<li>"+d+"</li>").appendTo(e.$productGroupListContainer));s.attr("group_name",d),s.attr("group_code",r),s.click(function(t){e.$productGroupListContainer.find(".selected").removeClass("selected"),$(this).addClass("selected"),e.selectedProductGroupCode=r,e.selectedProductGroupName=d,e.selectedProductCode=-1,e.selectedProductName="";var o=e.selectedProductGroupName?e.selectedProductGroupName:"Category",s=e.selectedProductName?e.selectedProductName:"선택 메뉴";e.$orderWindow.find(".selected_cate_product").text(o+"/"+s),A3Maker.api.A3MakerApi("loadProductByProductGroup",{group_code:$(this).attr("group_code")},function(t){if(0==t.resultCode){var o=t.searchResult;e.$productListContainer.empty(),$.each(o,function(t,o){var r=o.item_name,d=o.item_code,s=o.stock,n=o.price,c=$("<li>"+r+"<span>("+n+")</span></li>").appendTo(e.$productListContainer);c.attr("item_code",d),c.attr("item_name",r),c.attr("item_price",n),c.attr("item_stock",s),c.click(function(t){e.$productListContainer.find(".selected").removeClass("selected"),$(this).addClass("selected"),e.selectedProductName=r,e.selectedProductCode=d,e.selectedProductPrice=n,e.selectedProductStock=s;var o=e.selectedProductGroupName?e.selectedProductGroupName:"Category",c=e.selectedProductName?e.selectedProductName:"선택 메뉴";e.$orderWindow.find(".selected_cate_product").text(o+"/"+c)})})}else alert("[loadProductByProductGroup] wrong request : "+t.resultMsg)})}),e.$productGroupListContainer.find("li:first").trigger("click")})}else alert("[loadProductGroup] wrong request : "+t.resultMsg)})},show:function(){var e=this;this.isProductSelected=!1,this.$orderWindow=$(A3Maker.orderWindowHTML),this.$orderWindow.prependTo($("body")),this.$addMenu=this.$orderWindow.find("button.btn_add_product"),"test"!=A3Maker.mode&&this.$addMenu.click(function(t){e.$addMenuContainer=$(A3Maker.addMenuContainerHTML),$("body").prepend(e.$addMenuContainer),e.$addMenuContainer.find("#add_memu_iframe").attr("src",location.protocol+"//"+location.host+"/web.action?mode=3300"),e.$addMenuContainer.css("position","absolute"),e.$addMenuContainer.css("z-index","999999999"),e.$addMenuContainer.css("left","50%"),e.$addMenuContainer.css("top","50%"),e.$addMenuContainer.css("width","1400px"),e.$addMenuContainer.css("height","800px"),e.$addMenuContainer.css("margin-top","-400px"),e.$addMenuContainer.css("margin-left","-700px"),e.$addMenuContainer.css({"border-radius":"10px 10px 10px 10px","-moz-border-radius":"10px 10px 10px 10px","-webkit-border-radius":"10px 10px 10px 10px",border:"0px solid #000000"}),e.$addMenuContainer.find(".close_menu").click(function(t){e.$addMenuContainer.hide(),e.$addMenuContainer.remove(),e.loadMenuGroupInfo()})}),this.$productGroupListContainer=this.$orderWindow.find(".productGroupListContainer"),this.$productListContainer=this.$orderWindow.find(".productListContainer"),(A3Maker.mode="test")?this.renderDummyData(A3Maker.dummy.storeCode):his.loadMenuGroupInfo(),this.$orderWindow.find(".choose").click(function(t){if(-1!=e.selectedProductGroupCode&&-1!=e.selectedProductCode){var o=A3Maker.getSelectedComponent();"order"==o.data.type?(o.setProduct(e.selectedProductCode,e.selectedProductName,e.selectedProductPrice,e.selectedProductStock),e.close()):alert("wrong operation")}else alert("옳바른 상품 정보를 선택해주세요")}),this.$orderWindow.find(".close").click(function(t){e.close()}),this.$orderWindow.find(".btn_close_order").click(function(t){e.close()}),$(".menuselect_box").mCustomScrollbar({theme:"minimal"})},renderDummyData:function(e){var t=this;this.$productGroupListContainer.empty(),this.$productListContainer.empty();var o=A3Maker.dummy.groups;$.each(o,function(e,o){var r=o.groupCode,d=o.groupName,s=(o.pos_menugroup_seq,$("<li>"+d+"</li>").appendTo(t.$productGroupListContainer));s.attr("group_name",d),s.attr("group_code",r),s.click(function(e){t.$productGroupListContainer.find(".selected").removeClass("selected"),$(this).addClass("selected"),t.selectedProductGroupCode=r,t.selectedProductGroupName=d,t.selectedProductCode=-1,t.selectedProductName="";var o=t.selectedProductGroupName?t.selectedProductGroupName:"Category",s=t.selectedProductName?t.selectedProductName:"선택 메뉴";t.$orderWindow.find(".selected_cate_product").html(o+"&nbsp;/&nbsp;"+s);var n=A3Maker.dummy.menus;n=n.filter(e=>e.groupCode==t.selectedProductGroupCode),t.$productListContainer.empty(),$.each(n,function(e,o){var r=o.menuName,d=o.menuCode,s=o.menuStock,n=o.menuPrice,c=o.menuDes,i=o.groupCode,a=o.groupName,u=o.image,p=A3Maker.dummy.storeCode,l=o.menuDiscount,m=$("<li></li>");m.attr("item_name",r),m.attr("item_code",d),m.attr("item_stock",s),m.attr("item_price",n),m.attr("group_code",i),m.attr("group_name",a),m.attr("store_code",p),m.attr("item_discount",l),m.css("position","relative"),m.css("height","90px");var C=$("<div></div>");C.css("postion","relative");var P=$("<img/>");P.attr("src",u),P.css("position","relative"),P.css("top","10px"),P.css("left","3px"),P.css("width","60px"),P.css("height","60px");var h=$("<span><<strong></strong></span>");h.css("position","absolute"),h.css("top","1px"),h.css("left","80px").html("상품명&nbsp;:&nbsp;<strong>"+r+"</strong>");var g=$("<span><<strong></strong></span>");g.css("position","absolute"),g.css("top","25px"),g.css("left","200px").html("재고&nbsp;:&nbsp;<strong>"+s+"</strong>");var f=$("<span><strong></strong></span>");f.css("position","absolute"),f.css("top","25px"),f.css("left","80px").html("상품 가격 &nbsp;:&nbsp;<strong>"+n+"</strong>");var M=$("<span><<strong></strong></span>");M.css("position","absolute"),M.css("top","50px"),M.css("left","80px").html("상품 설명&nbsp;:&nbsp;<strong>"+c+"</strong>"),C.append(P),C.append(h),C.append(g),C.append(f),C.append(M),m.append(C),t.$productListContainer.append(m),m.attr("menuCode",d),m.attr("menuName",r),m.attr("menuPrice",n),m.attr("menuStock",s),m.attr("menuDes",c),m.attr("imaee",c),m.attr("groupName",a),m.click(function(e){t.$productListContainer.find(".selected").removeClass("selected"),$(this).addClass("selected"),t.selectedProductName=r,t.selectedProductCode=d,t.selectedProductPrice=n,t.selectedProductStock=s;var o=t.selectedProductGroupName?t.selectedProductGroupName:"Category",c=t.selectedProductName?t.selectedProductName:"선택 메뉴";t.$orderWindow.find(".selected_cate_product").html(o+"&nbsp;/&nbsp;"+c)})})}),t.$productGroupListContainer.find("li:first").trigger("click")})},close:function(){var e=this.$productGroupListContainer.find(".selected"),t=this.$productListContainer.find(".selected");A3Maker.getSelectedComponent().setData({menuGroupCode:e.attr("groupCode"),menuGroupName:t.attr("groupName"),menuCode:t.attr("menuCode"),menuName:t.attr("menuName"),menuPrice:t.attr("menuPrice"),menuStock:t.attr("menuStock"),menuDes:t.attr("menuDes")}),this.isProductSelected=!1,this.selectedProductGroupCode=-1,this.selectedProductCode=-1,this.$orderWindow.hide(),this.$orderWindow.remove}},A3Maker.orderWindow.init()});